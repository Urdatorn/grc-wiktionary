<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Module:User:Erutuon/grc - Wiktionary, the free dictionary</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )enwiktionarymwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"4fa22813-d7ab-4b26-8efe-c33a3c848e65","wgCanonicalNamespace":"Module","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":828,"wgPageName":"Module:User:Erutuon/grc","wgTitle":"User:Erutuon/grc","wgCurRevisionId":52622602,"wgRevisionId":52622602,"wgArticleId":6421350,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":[
"*"],"wgCategories":["Pages with module errors/hidden","User sandbox modules","Entry-generating modules"],"wgPageViewLanguage":"en","wgPageContentLanguage":"en","wgPageContentModel":"Scribunto","wgRelevantPageName":"Module:User:Erutuon/grc","wgRelevantArticleId":6421350,"wgIsProbablyEditable":true,"wgRelevantPageIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgNoticeProject":"wiktionary","wgCiteReferencePreviewsActive":true,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFDisplayWikibaseDescriptions":{"search":true,"watchlist":true,"tagline":false,"nearby":true},"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":30000,"ScribuntoErrors":{"d5322572":true},"ScribuntoErrors-d5322572":
"\u003Cp\u003ELua error at line 913: attempt to call field 'pattern_escape' (a nil value)\u003C/p\u003E\u003Cp\u003EBacktrace:\u003C/p\u003E\u003Col class=\"scribunto-trace\"\u003E\u003Cli\u003E\u003Cstrong\u003E\u003Ca href=\"//en.wiktionary.org/w/index.php?title=Module:User:Erutuon/grc\u0026amp;action=edit#mw-ce-l913\"\u003EModule:User:Erutuon/grc:913\u003C/a\u003E\u003C/strong\u003E: in function \"chunk\"\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003Emw.lua:527\u003C/strong\u003E:\u0026#160;?\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003E[C]\u003C/strong\u003E:\u0026#160;?\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003E[C]\u003C/strong\u003E: in function \"expandTemplate\"\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003Emw.lua:333\u003C/strong\u003E: in function \"expandTemplate\"\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003E\u003Ca href=\"//en.wiktionary.org/w/index.php?title=Module:documentation\u0026amp;action=edit#mw-ce-l894\"\u003EModule:documentation:894\u003C/a\u003E\u003C/strong\u003E: in function \"chunk\"\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003Emw.lua:527\u003C/strong\u003E:\u0026#160;?\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003E[C]\u003C/strong\u003E:\u0026#160;?\u003C/li\u003E\u003C/ol\u003E"
,"wgCentralAuthMobileDomain":false,"wgEditSubmitButtonLabelPublish":true,"wgULSPosition":"interlanguage","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false,"wgCheckUserClientHintsHeadersJsApi":["architecture","bitness","brands","fullVersionList","mobile","model","platform","platformVersion"]};RLSTATE={"ext.gadget.LanguagesAndScripts":"ready","ext.gadget.Palette":"ready","ext.gadget.Site":"ready","ext.globalCssJs.user.styles":"ready","site.styles":"ready","user.styles":"ready","ext.globalCssJs.user":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","codex-search-styles":"ready","ext.uls.interlanguage":"ready","wikibase.client.init":"ready","ext.wikimediaBadges":"ready"};RLPAGEMODULES=["ext.scribunto.errors","ext.pygments.view","site","mediawiki.page.ready","skins.vector.legacy.js","ext.centralNotice.geoIP",
"ext.centralNotice.startUp","ext.gadget.LegacyScripts","ext.gadget.DocTabs","ext.gadget.RevdelInfo","ext.gadget.PagePreviews","ext.gadget.Edittools","ext.gadget.defaultVisibilityToggles","ext.gadget.UnsupportedTitles","ext.gadget.WiktGadgetPrefs","ext.urlShortener.toolbar","ext.centralauth.centralautologin","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.echo.centralauth","ext.eventLogging","ext.wikimediaEvents","ext.navigationTiming","ext.uls.compactlinks","ext.uls.interface","ext.checkUser.clientHints"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2CwikimediaBadges%7Cext.uls.interlanguage%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy%7Cwikibase.client.init&amp;only=styles&amp;skin=vector">
<script async="" src="/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.gadget.LanguagesAndScripts%2CPalette%2CSite&amp;only=styles&amp;skin=vector">
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.44.0-wmf.3">
<meta name="referrer" content="origin">
<meta name="referrer" content="origin-when-cross-origin">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<meta property="og:site_name" content="Wiktionary">
<meta property="og:title" content="Module:User:Erutuon/grc - Wiktionary, the free dictionary">
<meta property="og:type" content="website">
<link rel="alternate" media="only screen and (max-width: 640px)" href="//en.m.wiktionary.org/wiki/Module:User:Erutuon/grc">
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=Module:User:Erutuon/grc&amp;action=edit">
<link rel="apple-touch-icon" href="/static/apple-touch/wiktionary/en.png">
<link rel="icon" href="/static/favicon/wiktionary/en.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/w/rest.php/v1/search" title="Wiktionary (en)">
<link rel="EditURI" type="application/rsd+xml" href="//en.wiktionary.org/w/api.php?action=rsd">
<link rel="canonical" href="https://en.wiktionary.org/wiki/Module:User:Erutuon/grc">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">
<link rel="alternate" type="application/atom+xml" title="Wiktionary Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom">
<link rel="dns-prefetch" href="//meta.wikimedia.org" />
<link rel="dns-prefetch" href="//login.wikimedia.org">
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-828 ns-subject mw-editable page-Module_User_Erutuon_grc rootpage-Module_User_Erutuon skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"><!-- CentralNotice --></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-namespace">Module</span><span class="mw-page-title-separator">:</span><span class="mw-page-title-main">User:Erutuon/grc</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Wiktionary, the free dictionary</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr"><div class="documentation" style="display:block; clear:both">
<hr />
<dl class="plainlinks" style="font-size: smaller;"><dd><i style="font-size: larger;">The following <a href="/wiki/Help:Documenting_templates_and_modules" title="Help:Documenting templates and modules">documentation</a> is located at <a href="/wiki/Module:User:Erutuon/grc/documentation" title="Module:User:Erutuon/grc/documentation">Module:User:Erutuon/grc/documentation</a>. <sup>[<a class="external text" href="https://en.wiktionary.org/w/index.php?title=Module:User:Erutuon/grc/documentation&amp;action=edit">edit</a>]</sup></i></dd><dd> <i>Useful links</i>: <a href="/w/index.php?title=Module:User:Erutuon&amp;action=edit&amp;redlink=1" class="new" title="Module:User:Erutuon (page does not exist)">root page</a> • <a href="/wiki/Special:PrefixIndex/Module:User:Erutuon/" title="Special:PrefixIndex/Module:User:Erutuon/">root page’s subpages</a> • <a class="external text" href="https://en.wiktionary.org/w/index.php?title=Special%3AWhatLinksHere%2FModule%3AUser%3AErutuon%2Fgrc&amp;hideredirs=1&amp;hidetrans=1">links</a> • <a class="external text" href="https://en.wiktionary.org/w/index.php?title=Special%3AWhatLinksHere%2FModule%3AUser%3AErutuon%2Fgrc&amp;hidelinks=1&amp;hideredirs=1">transclusions</a> • <a href="/wiki/Module:User:Erutuon/grc/testcases" title="Module:User:Erutuon/grc/testcases">testcases</a> • <a href="/wiki/User:Erutuon" title="User:Erutuon">user page</a> • <a href="/wiki/User_talk:Erutuon" title="User talk:Erutuon">user talk page</a> • <a href="/wiki/Special:PrefixIndex/User:Erutuon/" title="Special:PrefixIndex/User:Erutuon/">userspace</a></dd></dl>
<p><strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
<strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
<strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
<strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
</p>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA}}

===Participle===
{{grc-part-1<span class="err">&amp;</span>3|εἰδυῖᾰ|εἰδός}}

# {{inflection of|grc|οἶδᾰ||perf|act|part}}

====Declension====
{{grc-adecl|εἰδώς|εἰδυῖᾰ}}
</pre></div>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA|ἔδοσᾰν}}

===Verb===
{{grc-verb form|ἔδοσᾰν}}

# {{inflection of|grc|δῐ́δωμῐ||3|p|aor|act|ind}}
</pre></div>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA|ἔδοσᾰν}}

===Verb===
{{grc-verb form|ἔδοσᾰν}}

# {{inflection of|grc|δῐ́δωμῐ||3|p|aor|act|ind}}
</pre></div>
<p><strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
</p>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Etymology===
Substantivization of the feminine of {{subst:chars|m|grc|doti^ko/s}}.

===Pronunciation===
{{grc-IPA|δοτῐκή}}

===Noun===
{{grc-noun|δοτῐκή|δοτῐκῆς|f|first}}

# the dative case

====Declension====
{{grc-decl|δοτῐκή|δοτῐκῆς}}

===Further reading===
* {{R:LSJ|δοτικός}}
</pre></div>
<p><strong class="error"><span class="scribunto-error mw-scribunto-error-d5322572">Lua error at line 913: attempt to call field 'pattern_escape' (a nil value)</span></strong>
</p>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA}}

===Adjective===
{{grc-adj-1<span class="err">&amp;</span>2|σή|σόν}}

# your

====Declension====
{{grc-adecl|σός|σή}}

===Further reading===
* {{R:LSJ}}
</pre></div>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA|Πηληῐ̈ᾰ́δης}}

===Noun===
{{grc-noun|Πηληῐ̈ᾰ́δης|Πηληῐ̈ᾰ́δεω|m|first}} {{tlb|grc|Epic}}

# son of Peleus

====Declension====
{{grc-decl|Πηληῐ̈ᾰ́δης|Πηληῐ̈ᾰ́δεω|form=sing|dial=epi}}

===Further reading===
* {{R:LSJ}}
</pre></div>
<div class="mw-highlight mw-highlight-lang-html mw-content-ltr" dir="ltr"><pre><span></span>==Ancient Greek==

===Pronunciation===
{{grc-IPA}}

===Noun===
{{grc-noun|δήμου|m|second}}

# people, nation

====Declension====
{{grc-decl|δῆμος|δήμου}}

===Further reading===
* {{R:LSJ}}
* {{R:Cunliffe}}
</pre></div>
<br style="clear: both;" /></div>
<div class="mw-highlight mw-highlight-lang-lua mw-content-ltr mw-highlight-lines" dir="ltr"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos" data-line="1"></span></a><span class="kd">local</span> <span class="n">export</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos" data-line="2"></span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos" data-line="3"></span></a><span class="kd">local</span> <span class="n">add_dotted_circle</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:Unicode data&quot;</span><span class="p">).</span><span class="n">add_dotted_circle</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos" data-line="4"></span></a><span class="kd">local</span> <span class="n">highlight</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:debug&quot;</span><span class="p">).</span><span class="n">highlight</span> <span class="p">{</span> <span class="n">lang</span> <span class="o">=</span> <span class="s2">&quot;html&quot;</span> <span class="p">}</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos" data-line="5"></span></a><span class="kd">local</span> <span class="n">Latin_to_Greek</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:User:Erutuon/grc/Latin to Greek&quot;</span><span class="p">)</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos" data-line="6"></span></a><span class="kd">local</span> <span class="n">tokenize</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:grc-utilities&quot;</span><span class="p">).</span><span class="n">tokenize</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos" data-line="7"></span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos" data-line="8"></span></a><span class="kd">local</span> <span class="n">grc</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:languages&quot;</span><span class="p">).</span><span class="n">getByCode</span><span class="p">(</span><span class="s2">&quot;grc&quot;</span><span class="p">)</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos" data-line="9"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">make_entry_name</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos" data-line="10"></span></a>	<span class="kr">return</span> <span class="n">grc</span><span class="p">:</span><span class="n">makeEntryName</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos" data-line="11"></span></a><span class="kr">end</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos" data-line="12"></span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos" data-line="13"></span></a><span class="kd">local</span> <span class="n">title</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">getCurrentTitle</span><span class="p">()</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos" data-line="14"></span></a><span class="kd">local</span> <span class="n">namespace</span> <span class="o">=</span> <span class="n">title</span><span class="p">.</span><span class="n">nsText</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos" data-line="15"></span></a><span class="kd">local</span> <span class="n">pagename</span> <span class="o">=</span> <span class="n">title</span><span class="p">.</span><span class="n">text</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos" data-line="16"></span></a><span class="kd">local</span> <span class="n">nonmainspace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="o">~=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos" data-line="17"></span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos" data-line="18"></span></a><span class="kd">local</span> <span class="n">str_find</span> <span class="o">=</span> <span class="nb">string.find</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos" data-line="19"></span></a><span class="kd">local</span> <span class="n">str_gsub</span> <span class="o">=</span> <span class="nb">string.gsub</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos" data-line="20"></span></a><span class="kd">local</span> <span class="n">str_gmatch</span> <span class="o">=</span> <span class="nb">string.gmatch</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos" data-line="21"></span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos" data-line="22"></span></a><span class="kd">local</span> <span class="n">ufind</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">find</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos" data-line="23"></span></a><span class="kd">local</span> <span class="n">umatch</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">match</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos" data-line="24"></span></a><span class="kd">local</span> <span class="n">decompose</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFD</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos" data-line="25"></span></a><span class="kd">local</span> <span class="n">U</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">char</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos" data-line="26"></span></a><span class="kd">local</span> <span class="n">macron</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x304</span><span class="p">)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos" data-line="27"></span></a><span class="kd">local</span> <span class="n">breve</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x306</span><span class="p">)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos" data-line="28"></span></a><span class="kd">local</span> <span class="n">rough</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x314</span><span class="p">)</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos" data-line="29"></span></a><span class="kd">local</span> <span class="n">smooth</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x313</span><span class="p">)</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos" data-line="30"></span></a><span class="kd">local</span> <span class="n">diaeresis</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x308</span><span class="p">)</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos" data-line="31"></span></a><span class="kd">local</span> <span class="n">acute</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x301</span><span class="p">)</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos" data-line="32"></span></a><span class="kd">local</span> <span class="n">grave</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x300</span><span class="p">)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos" data-line="33"></span></a><span class="kd">local</span> <span class="n">circumflex</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x342</span><span class="p">)</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos" data-line="34"></span></a><span class="kd">local</span> <span class="n">subscript</span> <span class="o">=</span> <span class="n">U</span><span class="p">(</span><span class="mh">0x345</span><span class="p">)</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos" data-line="35"></span></a><span class="kd">local</span> <span class="n">diacritic_patt</span> <span class="o">=</span> <span class="nb">table.concat</span> <span class="p">{</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos" data-line="36"></span></a>	<span class="s2">&quot;[&quot;</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos" data-line="37"></span></a>	<span class="n">macron</span><span class="p">,</span> <span class="n">breve</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos" data-line="38"></span></a>	<span class="n">rough</span><span class="p">,</span> <span class="n">smooth</span><span class="p">,</span> <span class="n">diaeresis</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos" data-line="39"></span></a>	<span class="n">acute</span><span class="p">,</span> <span class="n">grave</span><span class="p">,</span> <span class="n">circumflex</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos" data-line="40"></span></a>	<span class="n">subscript</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos" data-line="41"></span></a>	<span class="s2">&quot;]&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos" data-line="42"></span></a><span class="p">}</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos" data-line="43"></span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos" data-line="44"></span></a><span class="kd">local</span> <span class="n">UTF8_char</span> <span class="o">=</span> <span class="s2">&quot;[%z</span><span class="se">\1</span><span class="s2">-</span><span class="se">\127\194</span><span class="s2">-</span><span class="se">\244</span><span class="s2">][</span><span class="se">\128</span><span class="s2">-</span><span class="se">\191</span><span class="s2">]*&quot;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos" data-line="45"></span></a><span class="kd">local</span> <span class="n">basic_Greek</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="se">\206</span><span class="s2">-</span><span class="se">\207</span><span class="s2">][</span><span class="se">\128</span><span class="s2">-</span><span class="se">\191</span><span class="s2">]&quot;</span> <span class="c1">-- excluding first line of Greek and Coptic block: ͰͱͲͳʹ͵Ͷͷͺͻͼͽ;Ϳ</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos" data-line="46"></span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos" data-line="47"></span></a><span class="c1">-- Includes ͰͱͲͳʹ͵Ͷͷͺͻͼͽ;Ϳ</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos" data-line="48"></span></a><span class="c1">-- local diacritic = &quot;[\204-\205][\128-\191]&quot;</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos" data-line="49"></span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos" data-line="50"></span></a><span class="kd">local</span> <span class="n">decompose</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFD</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos" data-line="51"></span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos" data-line="52"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">quote</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos" data-line="53"></span></a>	<span class="kr">return</span> <span class="s2">&quot;“&quot;</span> <span class="o">..</span>  <span class="n">str</span> <span class="o">..</span> <span class="s2">&quot;”&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos" data-line="54"></span></a><span class="kr">end</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos" data-line="55"></span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos" data-line="56"></span></a><span class="kd">local</span> <span class="n">info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos" data-line="57"></span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos" data-line="58"></span></a><span class="c1">-- The tables are shared among different characters so that they can be checked</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos" data-line="59"></span></a><span class="c1">-- for equality if needed, and to use less space.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos" data-line="60"></span></a><span class="kd">local</span> <span class="n">vowel</span> <span class="o">=</span> <span class="p">{</span> <span class="n">vowel</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">diacritic_seat</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos" data-line="61"></span></a><span class="kd">local</span> <span class="n">iota</span> <span class="o">=</span> <span class="p">{</span> <span class="n">vowel</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">diacritic_seat</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">offglide</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos" data-line="62"></span></a><span class="kd">local</span> <span class="n">upsilon</span> <span class="o">=</span> <span class="p">{</span> <span class="n">vowel</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">diacritic_seat</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">offglide</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos" data-line="63"></span></a><span class="c1">-- Technically rho is only a seat for rough or smooth breathing.</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos" data-line="64"></span></a><span class="kd">local</span> <span class="n">rho</span> <span class="o">=</span> <span class="p">{</span> <span class="n">consonant</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">diacritic_seat</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos" data-line="65"></span></a><span class="kd">local</span> <span class="n">consonant</span> <span class="o">=</span> <span class="p">{</span> <span class="n">consonant</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos" data-line="66"></span></a><span class="kd">local</span> <span class="n">diacritic</span> <span class="o">=</span> <span class="p">{</span> <span class="n">diacritic</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos" data-line="67"></span></a><span class="c1">-- Needed for equality comparisons.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos" data-line="68"></span></a><span class="kd">local</span> <span class="n">breathing</span> <span class="o">=</span> <span class="p">{</span> <span class="n">diacritic</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos" data-line="69"></span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos" data-line="70"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">add_info</span><span class="p">(</span><span class="n">characters</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos" data-line="71"></span></a>	<span class="kr">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">characters</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="kr">then</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos" data-line="72"></span></a>		<span class="kr">for</span> <span class="n">character</span> <span class="kr">in</span> <span class="nb">string.gmatch</span><span class="p">(</span><span class="n">characters</span><span class="p">,</span> <span class="n">UTF8_char</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos" data-line="73"></span></a>			<span class="n">info</span><span class="p">[</span><span class="n">character</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos" data-line="74"></span></a>		<span class="kr">end</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos" data-line="75"></span></a>	<span class="kr">else</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos" data-line="76"></span></a>		<span class="kr">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">character</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">characters</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos" data-line="77"></span></a>			<span class="n">info</span><span class="p">[</span><span class="n">character</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos" data-line="78"></span></a>		<span class="kr">end</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos" data-line="79"></span></a>	<span class="kr">end</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos" data-line="80"></span></a><span class="kr">end</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos" data-line="81"></span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos" data-line="82"></span></a><span class="n">add_info</span><span class="p">({</span> <span class="n">macron</span><span class="p">,</span> <span class="n">breve</span><span class="p">,</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos" data-line="83"></span></a>		<span class="n">diaeresis</span><span class="p">,</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos" data-line="84"></span></a>		<span class="n">acute</span><span class="p">,</span> <span class="n">grave</span><span class="p">,</span> <span class="n">circumflex</span><span class="p">,</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos" data-line="85"></span></a>		<span class="n">subscript</span><span class="p">,</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos" data-line="86"></span></a>	<span class="p">},</span> <span class="n">diacritic</span><span class="p">)</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos" data-line="87"></span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos" data-line="88"></span></a><span class="n">add_info</span><span class="p">({</span><span class="n">rough</span><span class="p">,</span> <span class="n">smooth</span><span class="p">},</span> <span class="n">breathing</span><span class="p">)</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos" data-line="89"></span></a><span class="n">add_info</span><span class="p">(</span><span class="s2">&quot;ΑΕΗΟΩαεηοω&quot;</span><span class="p">,</span> <span class="n">vowel</span><span class="p">)</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos" data-line="90"></span></a><span class="n">add_info</span><span class="p">(</span><span class="s2">&quot;Ιι&quot;</span><span class="p">,</span> <span class="n">iota</span><span class="p">)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos" data-line="91"></span></a><span class="n">add_info</span><span class="p">(</span><span class="s2">&quot;Υυ&quot;</span><span class="p">,</span> <span class="n">upsilon</span><span class="p">)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos" data-line="92"></span></a><span class="n">add_info</span><span class="p">(</span><span class="s2">&quot;ΒΓΔΖΘΚΛΜΝΞΠΡΣΤΦΧΨϜϘϺϷͶϠβγδζθκλμνξπρσςτφχψϝϙϻϸͷϡ&quot;</span><span class="p">,</span> <span class="n">consonant</span><span class="p">)</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos" data-line="93"></span></a><span class="n">add_info</span><span class="p">(</span><span class="s2">&quot;Ρρ&quot;</span><span class="p">,</span> <span class="n">rho</span><span class="p">)</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos" data-line="94"></span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos" data-line="95"></span></a><span class="kd">local</span> <span class="n">not_recognized</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos" data-line="96"></span></a><span class="nb">setmetatable</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="p">{</span> <span class="n">__index</span> <span class="o">=</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos" data-line="97"></span></a>	<span class="kr">function</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos" data-line="98"></span></a>		<span class="kr">return</span> <span class="n">not_recognized</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos" data-line="99"></span></a>	<span class="kr">end</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos" data-line="100"></span></a><span class="p">})</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos" data-line="101"></span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos" data-line="102"></span></a><span class="c1">-- Equivalent of the current function.</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos" data-line="103"></span></a><span class="kr">function</span> <span class="nc">export</span><span class="p">.</span><span class="nf">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos" data-line="104"></span></a>	<span class="kd">local</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">vowel_info</span><span class="p">,</span> <span class="n">prev_info</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{},</span> <span class="p">{}</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos" data-line="105"></span></a>	<span class="kd">local</span> <span class="n">token_i</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos" data-line="106"></span></a>	<span class="kd">local</span> <span class="n">prev</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos" data-line="107"></span></a>	<span class="kr">for</span> <span class="n">character</span> <span class="kr">in</span> <span class="n">str_gmatch</span><span class="p">(</span><span class="n">decompose</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="n">UTF8_char</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos" data-line="108"></span></a>		<span class="kd">local</span> <span class="n">curr_info</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="n">character</span><span class="p">]</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos" data-line="109"></span></a>		<span class="c1">-- Split vowels between tokens if not a diphthong.</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos" data-line="110"></span></a>		<span class="kr">if</span> <span class="n">curr_info</span><span class="p">.</span><span class="n">vowel</span> <span class="kr">then</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos" data-line="111"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="n">curr_info</span><span class="p">.</span><span class="n">offglide</span> <span class="ow">and</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">vowel</span><span class="p">)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos" data-line="112"></span></a>					<span class="c1">-- υυ → υ, υ</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos" data-line="113"></span></a>					<span class="c1">-- ιυ → ι, υ</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos" data-line="114"></span></a>					<span class="ow">or</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">offglide</span> <span class="ow">and</span> <span class="n">curr_info</span> <span class="o">==</span> <span class="n">upsilon</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos" data-line="115"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos" data-line="116"></span></a>			<span class="kr">end</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos" data-line="117"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos" data-line="118"></span></a>			<span class="nb">table.insert</span><span class="p">(</span><span class="n">vowel_info</span><span class="p">,</span> <span class="p">{</span> <span class="n">index</span> <span class="o">=</span> <span class="n">token_i</span> <span class="p">})</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos" data-line="119"></span></a>		<span class="kr">elseif</span> <span class="n">curr_info</span><span class="p">.</span><span class="n">diacritic</span> <span class="kr">then</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos" data-line="120"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos" data-line="121"></span></a>			<span class="kr">if</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">vowel</span> <span class="ow">or</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">diacritic</span> <span class="kr">then</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos" data-line="122"></span></a>				<span class="kr">if</span> <span class="n">character</span> <span class="o">==</span> <span class="n">diaeresis</span> <span class="kr">then</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos" data-line="123"></span></a>					<span class="c1">-- Current token is vowel, vowel, possibly other diacritics,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos" data-line="124"></span></a>					<span class="c1">-- and a diaeresis.</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos" data-line="125"></span></a>					<span class="c1">-- Split the current token into two:</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos" data-line="126"></span></a>					<span class="c1">-- the first letter, then the second letter plus any diacritics.</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos" data-line="127"></span></a>					<span class="kd">local</span> <span class="n">previous_vowel</span><span class="p">,</span> <span class="n">vowel_with_diaeresis</span> <span class="o">=</span> <span class="nb">string.match</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="s2">&quot;^(&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span> <span class="o">..</span> <span class="s2">&quot;)(&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span> <span class="o">..</span> <span class="s2">&quot;.+)&quot;</span><span class="p">)</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos" data-line="128"></span></a>					<span class="kr">if</span> <span class="n">previous_vowel</span> <span class="kr">then</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos" data-line="129"></span></a>						<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">previous_vowel</span><span class="p">,</span> <span class="n">vowel_with_diaeresis</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos" data-line="130"></span></a>						<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos" data-line="131"></span></a>					<span class="kr">end</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos" data-line="132"></span></a>				<span class="kr">end</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos" data-line="133"></span></a>			<span class="kr">elseif</span> <span class="n">prev_info</span> <span class="o">==</span> <span class="n">rho</span> <span class="kr">then</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos" data-line="134"></span></a>				<span class="kr">if</span> <span class="n">curr_info</span> <span class="o">~=</span> <span class="n">breathing</span> <span class="kr">then</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos" data-line="135"></span></a>					<span class="kr">return</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;The character %s cannot have the accent %s on it.&quot;</span><span class="p">,</span> <span class="n">prev</span><span class="p">,</span> <span class="n">add_dotted_circle</span><span class="p">(</span><span class="n">character</span><span class="p">))</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos" data-line="136"></span></a>				<span class="kr">end</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos" data-line="137"></span></a>			<span class="kr">else</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos" data-line="138"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The character &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; cannot have a diacritic on it.&quot;</span><span class="p">)</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos" data-line="139"></span></a>			<span class="kr">end</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos" data-line="140"></span></a>		<span class="kr">elseif</span> <span class="n">curr_info</span> <span class="o">==</span> <span class="n">rho</span> <span class="kr">then</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos" data-line="141"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">prev_info</span> <span class="o">==</span> <span class="n">breathing</span> <span class="ow">and</span> <span class="n">info</span><span class="p">[</span><span class="nb">string.match</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="s2">&quot;^&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span><span class="p">)]</span> <span class="o">==</span> <span class="n">rho</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos" data-line="142"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos" data-line="143"></span></a>			<span class="kr">end</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos" data-line="144"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos" data-line="145"></span></a>		<span class="kr">else</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos" data-line="146"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="kr">then</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos" data-line="147"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos" data-line="148"></span></a>			<span class="kr">end</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos" data-line="149"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos" data-line="150"></span></a>		<span class="kr">end</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos" data-line="151"></span></a>		<span class="n">prev</span> <span class="o">=</span> <span class="n">character</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos" data-line="152"></span></a>		<span class="n">prev_info</span> <span class="o">=</span> <span class="n">curr_info</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos" data-line="153"></span></a>	<span class="kr">end</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos" data-line="154"></span></a>	<span class="kr">return</span> <span class="n">tokens</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos" data-line="155"></span></a><span class="kr">end</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos" data-line="156"></span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos" data-line="157"></span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos" data-line="158"></span></a><span class="kr">function</span> <span class="nc">export</span><span class="p">.</span><span class="nf">tokenize_vowels</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos" data-line="159"></span></a>	<span class="n">text</span> <span class="o">=</span> <span class="n">decompose</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos" data-line="160"></span></a>	
</span><span id="L-161"><a href="#L-161"><span class="linenos" data-line="161"></span></a>	<span class="kd">local</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">vowel_info</span><span class="p">,</span> <span class="n">prev_info</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{},</span> <span class="p">{}</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos" data-line="162"></span></a>	<span class="kd">local</span> <span class="n">token_i</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos" data-line="163"></span></a>	<span class="kd">local</span> <span class="n">prev</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos" data-line="164"></span></a>	<span class="kr">for</span> <span class="n">character</span> <span class="kr">in</span> <span class="n">str_gmatch</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">UTF8_char</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos" data-line="165"></span></a>		<span class="kd">local</span> <span class="n">curr_info</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="n">character</span><span class="p">]</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos" data-line="166"></span></a>		<span class="c1">-- Split vowels between tokens if not a diphthong.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos" data-line="167"></span></a>		<span class="kr">if</span> <span class="n">curr_info</span><span class="p">.</span><span class="n">vowel</span> <span class="kr">then</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos" data-line="168"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">curr_info</span><span class="p">.</span><span class="n">offglide</span> <span class="ow">and</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">vowel</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos" data-line="169"></span></a>					<span class="c1">-- υυ → υ, υ</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos" data-line="170"></span></a>					<span class="c1">-- ιυ → ι, υ</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos" data-line="171"></span></a>					<span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">prev_info</span><span class="p">.</span><span class="n">offglide</span> <span class="ow">and</span> <span class="n">curr_info</span> <span class="o">==</span> <span class="n">upsilon</span><span class="p">))</span> <span class="kr">then</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos" data-line="172"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos" data-line="173"></span></a>			<span class="kr">end</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos" data-line="174"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos" data-line="175"></span></a>			<span class="nb">table.insert</span><span class="p">(</span><span class="n">vowel_info</span><span class="p">,</span> <span class="p">{</span> <span class="n">index</span> <span class="o">=</span> <span class="n">token_i</span> <span class="p">})</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos" data-line="176"></span></a>		<span class="kr">elseif</span> <span class="n">curr_info</span><span class="p">.</span><span class="n">diacritic</span> <span class="kr">then</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos" data-line="177"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos" data-line="178"></span></a>			<span class="kr">if</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">vowel</span> <span class="ow">or</span> <span class="n">prev_info</span><span class="p">.</span><span class="n">diacritic</span> <span class="kr">then</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos" data-line="179"></span></a>				<span class="kr">if</span> <span class="n">character</span> <span class="o">==</span> <span class="n">diaeresis</span> <span class="kr">then</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos" data-line="180"></span></a>					<span class="c1">-- Current token is vowel, vowel, possibly other diacritics,</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos" data-line="181"></span></a>					<span class="c1">-- and a diaeresis.</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos" data-line="182"></span></a>					<span class="c1">-- Split the current token into two:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos" data-line="183"></span></a>					<span class="c1">-- the first letter, then the second letter plus any diacritics.</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos" data-line="184"></span></a>					<span class="kd">local</span> <span class="n">previous_vowel</span><span class="p">,</span> <span class="n">vowel_with_diaeresis</span> <span class="o">=</span> <span class="nb">string.match</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="s2">&quot;^(&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span> <span class="o">..</span> <span class="s2">&quot;)(&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span> <span class="o">..</span> <span class="s2">&quot;.+)&quot;</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos" data-line="185"></span></a>					<span class="kr">if</span> <span class="n">previous_vowel</span> <span class="kr">then</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos" data-line="186"></span></a>						<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">previous_vowel</span><span class="p">,</span> <span class="n">vowel_with_diaeresis</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos" data-line="187"></span></a>						<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos" data-line="188"></span></a>					<span class="kr">end</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos" data-line="189"></span></a>				<span class="kr">end</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos" data-line="190"></span></a>			<span class="kr">elseif</span> <span class="n">prev_info</span> <span class="o">==</span> <span class="n">rho</span> <span class="kr">then</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos" data-line="191"></span></a>				<span class="kr">if</span> <span class="n">curr_info</span> <span class="o">~=</span> <span class="n">breathing</span> <span class="kr">then</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos" data-line="192"></span></a>					<span class="kr">return</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;The character %s cannot have the accent %s on it.&quot;</span><span class="p">,</span> <span class="n">prev</span><span class="p">,</span> <span class="n">add_dotted_circle</span><span class="p">(</span><span class="n">character</span><span class="p">))</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos" data-line="193"></span></a>				<span class="kr">end</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos" data-line="194"></span></a>			<span class="kr">else</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos" data-line="195"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The character &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; cannot have a diacritic on it.&quot;</span><span class="p">)</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos" data-line="196"></span></a>			<span class="kr">end</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos" data-line="197"></span></a>		<span class="kr">elseif</span> <span class="n">curr_info</span> <span class="o">==</span> <span class="n">rho</span> <span class="kr">then</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos" data-line="198"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">prev_info</span> <span class="o">==</span> <span class="n">breathing</span> <span class="ow">and</span> <span class="n">info</span><span class="p">[</span><span class="nb">string.match</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">],</span> <span class="s2">&quot;^&quot;</span> <span class="o">..</span> <span class="n">basic_Greek</span><span class="p">)]</span> <span class="o">==</span> <span class="n">rho</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos" data-line="199"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos" data-line="200"></span></a>			<span class="kr">end</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos" data-line="201"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos" data-line="202"></span></a>		<span class="kr">else</span> <span class="c1">-- consonant or &quot;not recognized&quot;</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos" data-line="203"></span></a>			<span class="kr">if</span> <span class="n">prev</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">prev_info</span><span class="p">.</span><span class="n">consonant</span> <span class="ow">or</span> <span class="n">prev_info</span> <span class="o">==</span> <span class="n">not_recognized</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos" data-line="204"></span></a>				<span class="n">token_i</span> <span class="o">=</span> <span class="n">token_i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos" data-line="205"></span></a>			<span class="kr">end</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos" data-line="206"></span></a>			<span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">token_i</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">character</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos" data-line="207"></span></a>		<span class="kr">end</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos" data-line="208"></span></a>		<span class="n">prev</span> <span class="o">=</span> <span class="n">character</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos" data-line="209"></span></a>		<span class="n">prev_info</span> <span class="o">=</span> <span class="n">curr_info</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos" data-line="210"></span></a>	<span class="kr">end</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos" data-line="211"></span></a>	<span class="kr">return</span> <span class="n">tokens</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos" data-line="212"></span></a><span class="kr">end</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos" data-line="213"></span></a>
</span><span id="L-214"><a href="#L-214"><span class="linenos" data-line="214"></span></a><span class="kr">function</span> <span class="nc">export</span><span class="p">.</span><span class="nf">show</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos" data-line="215"></span></a>	<span class="kd">local</span> <span class="n">map</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:User:Erutuon/functional&quot;</span><span class="p">).</span><span class="n">map</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos" data-line="216"></span></a>	<span class="kd">local</span> <span class="n">token_format</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;polytonic&quot; style=&quot;background-color: #EFEFEF;&gt;%s&lt;/span&gt;&#39;</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos" data-line="217"></span></a>	<span class="kd">local</span> <span class="n">spacing</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos" data-line="218"></span></a>		<span class="p">[</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&amp;para;&quot;</span><span class="p">,</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos" data-line="219"></span></a>		<span class="p">[</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&amp;para;&quot;</span><span class="p">,</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos" data-line="220"></span></a>		<span class="p">[</span><span class="s2">&quot; &quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&amp;ensp;&quot;</span><span class="p">,</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos" data-line="221"></span></a>	<span class="p">}</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos" data-line="222"></span></a>	<span class="kd">local</span> <span class="kr">function</span> <span class="nf">print_tokens</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos" data-line="223"></span></a>		<span class="kr">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="kr">then</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos" data-line="224"></span></a>			<span class="kr">return</span> <span class="n">tokens</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos" data-line="225"></span></a>		<span class="kr">end</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos" data-line="226"></span></a>		<span class="kd">local</span> <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos" data-line="227"></span></a>		<span class="kr">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">token</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos" data-line="228"></span></a>			<span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">string.format</span><span class="p">(</span><span class="n">token_format</span><span class="p">,</span> <span class="n">str_gsub</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s2">&quot;%s&quot;</span><span class="p">,</span> <span class="n">spacing</span><span class="p">))</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos" data-line="229"></span></a>		<span class="kr">end</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos" data-line="230"></span></a>		<span class="kr">return</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos" data-line="231"></span></a>	<span class="kr">end</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos" data-line="232"></span></a>	<span class="kr">return</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">map</span><span class="p">(</span><span class="n">print_tokens</span><span class="p">,</span> <span class="n">map</span><span class="p">(</span><span class="n">export</span><span class="p">.</span><span class="n">tokenize</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">)),</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos" data-line="233"></span></a><span class="kr">end</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos" data-line="234"></span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos" data-line="235"></span></a><span class="c1">-- Assumes val is string or nil, as will be true if it is a template parameter.</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos" data-line="236"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">boolean_or_string</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos" data-line="237"></span></a>	<span class="kr">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="kr">then</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos" data-line="238"></span></a>		<span class="kr">return</span> <span class="kc">false</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos" data-line="239"></span></a>	<span class="kr">else</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos" data-line="240"></span></a>		<span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="p">:</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos" data-line="241"></span></a>	<span class="kr">end</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos" data-line="242"></span></a>	<span class="kd">local</span> <span class="n">number</span> <span class="o">=</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos" data-line="243"></span></a>	<span class="kr">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;no&quot;</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span> <span class="kr">then</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos" data-line="244"></span></a>		<span class="kr">return</span> <span class="kc">false</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos" data-line="245"></span></a>	<span class="kr">elseif</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;yes&quot;</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span> <span class="kr">then</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos" data-line="246"></span></a>		<span class="kr">return</span> <span class="kc">true</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos" data-line="247"></span></a>	<span class="kr">else</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos" data-line="248"></span></a>		<span class="kr">return</span> <span class="n">val</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos" data-line="249"></span></a>	<span class="kr">end</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos" data-line="250"></span></a><span class="kr">end</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos" data-line="251"></span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos" data-line="252"></span></a><span class="c1">-- Modification of findAmbig function in [[Module:grc-utilities]] that returns</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos" data-line="253"></span></a><span class="c1">-- boolean value.</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos" data-line="254"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">has_ambiguous_vowel</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos" data-line="255"></span></a>	<span class="kd">local</span> <span class="n">lengthDiacritic</span> <span class="o">=</span> <span class="s2">&quot;[&quot;</span> <span class="o">..</span> <span class="n">macron</span> <span class="o">..</span> <span class="n">breve</span> <span class="o">..</span> <span class="n">circumflex</span> <span class="o">..</span> <span class="n">subscript</span> <span class="o">..</span> <span class="s2">&quot;]&quot;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos" data-line="256"></span></a>	<span class="kd">local</span> <span class="n">aiu_diacritic</span> <span class="o">=</span> <span class="s2">&quot;^([&quot;</span> <span class="o">..</span> <span class="s2">&quot;αιυ&quot;</span> <span class="o">..</span> <span class="s2">&quot;])(&quot;</span> <span class="o">..</span> <span class="n">diacritic_patt</span> <span class="o">..</span> <span class="s2">&quot;*)$&quot;</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos" data-line="257"></span></a>	
</span><span id="L-258"><a href="#L-258"><span class="linenos" data-line="258"></span></a>	<span class="c1">-- breaks the word into units</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos" data-line="259"></span></a>	<span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">))</span> <span class="kr">do</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos" data-line="260"></span></a>		<span class="kd">local</span> <span class="n">vowel</span><span class="p">,</span> <span class="n">diacritics</span> <span class="o">=</span> <span class="n">umatch</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">aiu_diacritic</span><span class="p">)</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos" data-line="261"></span></a>			
</span><span id="L-262"><a href="#L-262"><span class="linenos" data-line="262"></span></a>		<span class="kr">if</span> <span class="n">vowel</span> <span class="ow">and</span> <span class="p">(</span><span class="n">diacritics</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos" data-line="263"></span></a>				<span class="ow">not</span> <span class="n">ufind</span><span class="p">(</span><span class="n">diacritics</span><span class="p">,</span> <span class="n">lengthDiacritic</span><span class="p">))</span> <span class="kr">then</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos" data-line="264"></span></a>			<span class="kr">return</span> <span class="kc">true</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos" data-line="265"></span></a>		<span class="kr">end</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos" data-line="266"></span></a>	<span class="kr">end</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos" data-line="267"></span></a>		
</span><span id="L-268"><a href="#L-268"><span class="linenos" data-line="268"></span></a>	<span class="kr">return</span> <span class="kc">false</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos" data-line="269"></span></a><span class="kr">end</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos" data-line="270"></span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos" data-line="271"></span></a>
</span><span id="L-272"><a href="#L-272"><span class="linenos" data-line="272"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">has_breve_or_macron</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos" data-line="273"></span></a>	<span class="n">text</span> <span class="o">=</span> <span class="n">decompose</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos" data-line="274"></span></a>	<span class="kr">return</span> <span class="n">str_find</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">macron</span><span class="p">)</span> <span class="ow">or</span> <span class="n">str_find</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">breve</span><span class="p">)</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos" data-line="275"></span></a><span class="kr">end</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos" data-line="276"></span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos" data-line="277"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">add_to_t</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos" data-line="278"></span></a>	<span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos" data-line="279"></span></a>		<span class="kr">if</span> <span class="n">t1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="kc">nil</span> <span class="kr">then</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos" data-line="280"></span></a>			<span class="n">t1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos" data-line="281"></span></a>		<span class="kr">else</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos" data-line="282"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Table 1 already has value for &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos" data-line="283"></span></a>		<span class="kr">end</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos" data-line="284"></span></a>	<span class="kr">end</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos" data-line="285"></span></a>	<span class="kr">return</span> <span class="n">t1</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos" data-line="286"></span></a><span class="kr">end</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos" data-line="287"></span></a>
</span><span id="L-288"><a href="#L-288"><span class="linenos" data-line="288"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">in_array</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos" data-line="289"></span></a>	<span class="kr">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos" data-line="290"></span></a>		<span class="kr">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">v</span> <span class="kr">then</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos" data-line="291"></span></a>			<span class="kr">return</span> <span class="n">i</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos" data-line="292"></span></a>		<span class="kr">end</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos" data-line="293"></span></a>	<span class="kr">end</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos" data-line="294"></span></a>	<span class="kr">return</span> <span class="kc">false</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos" data-line="295"></span></a><span class="kr">end</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos" data-line="296"></span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos" data-line="297"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">make_param</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos" data-line="298"></span></a>	<span class="kr">return</span> <span class="n">value</span> <span class="ow">and</span> <span class="s2">&quot;|&quot;</span> <span class="o">..</span> <span class="p">(</span><span class="n">name</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">..</span> <span class="s2">&quot;=&quot;</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">value</span> <span class="ow">or</span> <span class="kc">nil</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos" data-line="299"></span></a><span class="kr">end</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos" data-line="300"></span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos" data-line="301"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">add_content</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">content_table</span><span class="p">)</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos" data-line="302"></span></a>	<span class="kr">return</span> <span class="n">str_gsub</span><span class="p">(</span><span class="n">template</span><span class="p">,</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos" data-line="303"></span></a>		<span class="s2">&quot;{{{([^}]+)}}}&quot;</span><span class="p">,</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos" data-line="304"></span></a>		<span class="kr">function</span> <span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos" data-line="305"></span></a>			<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="n">content_table</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos" data-line="306"></span></a>			<span class="kr">return</span> <span class="n">in_array</span><span class="p">({</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;nil&quot;</span> <span class="p">},</span> <span class="nb">type</span><span class="p">(</span><span class="n">content</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">content</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos" data-line="307"></span></a>				<span class="ow">or</span> <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Invalid type for content variable &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="nb">tostring</span><span class="p">(</span><span class="n">code</span><span class="p">))</span> <span class="o">..</span> <span class="s2">&quot;: &quot;</span> <span class="o">..</span> <span class="nb">type</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos" data-line="308"></span></a>		<span class="kr">end</span><span class="p">)</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos" data-line="309"></span></a><span class="kr">end</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos" data-line="310"></span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos" data-line="311"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">accent_recessively</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos" data-line="312"></span></a>	<span class="kd">local</span> <span class="n">m_accent</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;Module:grc-accent&quot;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos" data-line="313"></span></a>	<span class="kr">return</span> <span class="n">m_accent</span><span class="p">.</span><span class="n">add_accent</span><span class="p">(</span><span class="n">m_accent</span><span class="p">.</span><span class="n">strip_tone</span><span class="p">(</span><span class="n">form</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos" data-line="314"></span></a><span class="kr">end</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos" data-line="315"></span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos" data-line="316"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">get_participle_information</span><span class="p">(</span><span class="n">masculine</span><span class="p">,</span> <span class="n">contraction_vowel</span><span class="p">)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos" data-line="317"></span></a>	<span class="kd">local</span> <span class="n">decl</span><span class="p">,</span> <span class="n">feminine</span><span class="p">,</span> <span class="n">neuter</span><span class="p">,</span> <span class="n">lemma</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos" data-line="318"></span></a>	
</span><span id="L-319"><a href="#L-319"><span class="linenos" data-line="319"></span></a>	<span class="kr">if</span> <span class="ow">not</span> <span class="p">(</span><span class="ow">not</span> <span class="n">contraction_vowel</span> <span class="ow">or</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos" data-line="320"></span></a>	<span class="ow">or</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span> <span class="ow">or</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos" data-line="321"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Invalid contraction vowel. Either omit or choose between a, e, o.&quot;</span><span class="p">)</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos" data-line="322"></span></a>	<span class="kr">end</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos" data-line="323"></span></a>	
</span><span id="L-324"><a href="#L-324"><span class="linenos" data-line="324"></span></a>	<span class="n">masculine</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFC</span><span class="p">(</span><span class="n">masculine</span><span class="p">)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos" data-line="325"></span></a>	
</span><span id="L-326"><a href="#L-326"><span class="linenos" data-line="326"></span></a>	<span class="kr">if</span> <span class="n">masculine</span><span class="p">:</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;ος$&quot;</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos" data-line="327"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="s2">&quot;1&amp;2&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos" data-line="328"></span></a>		<span class="n">feminine</span> <span class="o">=</span> <span class="n">accent_recessively</span><span class="p">(</span><span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;ος$&quot;</span><span class="p">,</span> <span class="s2">&quot;η&quot;</span><span class="p">))</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos" data-line="329"></span></a>		<span class="n">neuter</span> <span class="o">=</span> <span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;ς$&quot;</span><span class="p">,</span> <span class="s2">&quot;ν&quot;</span><span class="p">)</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos" data-line="330"></span></a>		
</span><span id="L-331"><a href="#L-331"><span class="linenos" data-line="331"></span></a>		<span class="c1">-- Warning! This simply assumes the participle is present mediopassive,</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos" data-line="332"></span></a>		<span class="c1">-- like λεγόμενος, not second aorist, like λαβόμενος.</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos" data-line="333"></span></a>		<span class="kr">if</span> <span class="n">masculine</span><span class="p">:</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;όμενος$&quot;</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos" data-line="334"></span></a>			<span class="n">lemma</span> <span class="o">=</span> <span class="n">accent_recessively</span><span class="p">(</span><span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;όμενος$&quot;</span><span class="p">,</span> <span class="s2">&quot;ω&quot;</span><span class="p">))</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos" data-line="335"></span></a>		<span class="kr">end</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos" data-line="336"></span></a>	<span class="kr">else</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos" data-line="337"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="s2">&quot;1&amp;3&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos" data-line="338"></span></a>		
</span><span id="L-339"><a href="#L-339"><span class="linenos" data-line="339"></span></a>		<span class="kd">local</span> <span class="n">m_utilities_data</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;Module:grc-utilities/data&quot;</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos" data-line="340"></span></a>		<span class="c1">-- Warning! This pattern will not work if there&#39;s a vowel before the</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos" data-line="341"></span></a>		<span class="c1">-- participle ending, as in τεθνεώς, perfect active participle of</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos" data-line="342"></span></a>		<span class="c1">-- θνῄσκω.</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos" data-line="343"></span></a>		<span class="kd">local</span> <span class="n">ending</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFD</span><span class="p">(</span><span class="n">masculine</span><span class="p">),</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos" data-line="344"></span></a>			<span class="n">m_utilities_data</span><span class="p">.</span><span class="n">vowel</span> <span class="o">..</span> <span class="s2">&quot;?[ιυ]?[^&quot;</span> <span class="o">..</span> <span class="n">m_utilities_data</span><span class="p">.</span><span class="n">vowels</span> <span class="o">..</span> <span class="s2">&quot;]+$&quot;</span><span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos" data-line="345"></span></a>		
</span><span id="L-346"><a href="#L-346"><span class="linenos" data-line="346"></span></a>		<span class="kr">if</span> <span class="n">ending</span> <span class="kr">then</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos" data-line="347"></span></a>			<span class="kd">local</span> <span class="n">m_accent</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;Module:grc-accent&quot;</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos" data-line="348"></span></a>			<span class="n">ending</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFC</span><span class="p">(</span><span class="n">m_accent</span><span class="p">.</span><span class="n">strip_tone</span><span class="p">(</span><span class="n">ending</span><span class="p">))</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos" data-line="349"></span></a>			
</span><span id="L-350"><a href="#L-350"><span class="linenos" data-line="350"></span></a>			<span class="kd">local</span> <span class="n">accent_pos</span><span class="p">,</span> <span class="n">accent_type</span> <span class="o">=</span> <span class="n">m_accent</span><span class="p">.</span><span class="n">detect_accent</span><span class="p">(</span><span class="n">masculine</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos" data-line="351"></span></a>			<span class="kd">local</span> <span class="n">toneless_masculine</span> <span class="o">=</span> <span class="n">m_accent</span><span class="p">.</span><span class="n">strip_tone</span><span class="p">(</span><span class="n">masculine</span><span class="p">)</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos" data-line="352"></span></a>			
</span><span id="L-353"><a href="#L-353"><span class="linenos" data-line="353"></span></a>			<span class="kr">if</span> <span class="n">ending</span> <span class="o">==</span> <span class="s2">&quot;ων&quot;</span> <span class="kr">then</span> <span class="c1">-- recessive, oxytone, properispomenon</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos" data-line="354"></span></a>				<span class="kd">local</span> <span class="n">stem</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">gsub</span><span class="p">(</span><span class="n">toneless_masculine</span><span class="p">,</span> <span class="s2">&quot;ων$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos" data-line="355"></span></a>				<span class="kr">if</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span> <span class="kr">then</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos" data-line="356"></span></a>					<span class="c1">-- τῑμῶν, τῑμῶσᾰ, τῑμῶν</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos" data-line="357"></span></a>					<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ωσᾰ&quot;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos" data-line="358"></span></a>					<span class="n">neuter</span> <span class="o">=</span> <span class="n">masculine</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos" data-line="359"></span></a>					<span class="n">lemma</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ᾰ́ω&quot;</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos" data-line="360"></span></a>				<span class="kr">else</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos" data-line="361"></span></a>					<span class="c1">-- λέγων, λέγουσα, λέγον; λαβών, λαβοῦσᾰ, λαβόν;</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos" data-line="362"></span></a>					<span class="c1">-- ποιῶν, ποιοῦσᾰ, ποιοῦν; δηλῶν, δηλοῦσᾰ, δηλοῦν</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos" data-line="363"></span></a>					<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ουσᾰ&quot;</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos" data-line="364"></span></a>					<span class="kr">if</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span> <span class="ow">or</span> <span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;o&quot;</span> <span class="kr">then</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos" data-line="365"></span></a>						<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ουν&quot;</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos" data-line="366"></span></a>						<span class="n">lemma</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="p">(</span><span class="n">contraction_vowel</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span> <span class="ow">and</span> <span class="s2">&quot;έω&quot;</span> <span class="ow">or</span> <span class="s2">&quot;όω&quot;</span><span class="p">)</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos" data-line="367"></span></a>					<span class="kr">else</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos" data-line="368"></span></a>						<span class="c1">-- If accent is paroxytone, then this is a present-tense</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos" data-line="369"></span></a>						<span class="c1">-- verb.</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos" data-line="370"></span></a>						<span class="kr">if</span> <span class="n">m_accent</span><span class="p">.</span><span class="n">detect_accent</span><span class="p">(</span><span class="n">masculine</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos" data-line="371"></span></a>							<span class="n">lemma</span> <span class="o">=</span> <span class="n">accent_recessively</span><span class="p">(</span><span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ω&quot;</span><span class="p">)</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos" data-line="372"></span></a>						<span class="kr">end</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos" data-line="373"></span></a>						<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ον&quot;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos" data-line="374"></span></a>					<span class="kr">end</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos" data-line="375"></span></a>				<span class="kr">end</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos" data-line="376"></span></a>			<span class="kr">elseif</span> <span class="n">ending</span> <span class="o">==</span> <span class="s2">&quot;ᾱς&quot;</span> <span class="kr">then</span> <span class="c1">-- recessive except in athematic verbs</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos" data-line="377"></span></a>				<span class="n">stem</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">gsub</span><span class="p">(</span><span class="n">toneless_masculine</span><span class="p">,</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos" data-line="378"></span></a>					<span class="s2">&quot;α&quot;</span> <span class="o">..</span> <span class="n">m_utilities_data</span><span class="p">.</span><span class="n">diacritics</span><span class="p">.</span><span class="n">macron</span> <span class="o">..</span> <span class="n">m_utilities_data</span><span class="p">.</span><span class="n">diacritics</span><span class="p">.</span><span class="n">acute</span> <span class="o">..</span> <span class="s2">&quot;?ς&quot;</span><span class="p">,</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos" data-line="379"></span></a>					<span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos" data-line="380"></span></a>				<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ᾱσᾰ&quot;</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos" data-line="381"></span></a>				<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ᾰν&quot;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos" data-line="382"></span></a>			
</span><span id="L-383"><a href="#L-383"><span class="linenos" data-line="383"></span></a>			<span class="c1">-- Aorist passive or athematic; always oxytone?</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos" data-line="384"></span></a>			<span class="kr">elseif</span> <span class="n">ending</span> <span class="o">==</span> <span class="s2">&quot;εις&quot;</span> <span class="kr">then</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos" data-line="385"></span></a>				<span class="n">stem</span> <span class="o">=</span> <span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;είς&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos" data-line="386"></span></a>				<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;εῖσᾰ&quot;</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos" data-line="387"></span></a>				<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;έν&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos" data-line="388"></span></a>			<span class="kr">elseif</span> <span class="n">ending</span> <span class="o">==</span> <span class="s2">&quot;ως&quot;</span> <span class="kr">then</span> <span class="c1">-- Perfect active; always oxytone?</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos" data-line="389"></span></a>				<span class="n">stem</span> <span class="o">=</span> <span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;ώς&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos" data-line="390"></span></a>				<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;υῖᾰ&quot;</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos" data-line="391"></span></a>				<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ός&quot;</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos" data-line="392"></span></a>			
</span><span id="L-393"><a href="#L-393"><span class="linenos" data-line="393"></span></a>			<span class="c1">-- Present active, δεικνῡ́ς and such</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos" data-line="394"></span></a>			<span class="kr">elseif</span> <span class="n">ending</span> <span class="o">==</span> <span class="s2">&quot;ῡς&quot;</span> <span class="kr">then</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos" data-line="395"></span></a>				<span class="n">stem</span> <span class="o">=</span> <span class="n">masculine</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;ῡ́ς&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos" data-line="396"></span></a>				<span class="n">feminine</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ῦσᾰ&quot;</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos" data-line="397"></span></a>				<span class="n">neuter</span> <span class="o">=</span> <span class="n">stem</span> <span class="o">..</span> <span class="s2">&quot;ῠ́ν&quot;</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos" data-line="398"></span></a>			<span class="kr">end</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos" data-line="399"></span></a>			
</span><span id="L-400"><a href="#L-400"><span class="linenos" data-line="400"></span></a>			<span class="kr">if</span> <span class="n">feminine</span> <span class="ow">and</span> <span class="n">neuter</span> <span class="kr">then</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos" data-line="401"></span></a>				<span class="kd">local</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos" data-line="402"></span></a>					<span class="n">circumflex</span> <span class="o">=</span> <span class="n">accent_type</span> <span class="o">==</span> <span class="s2">&quot;circumflex&quot;</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos" data-line="403"></span></a>				<span class="p">}</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos" data-line="404"></span></a>				<span class="n">feminine</span><span class="p">,</span> <span class="n">neuter</span> <span class="o">=</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos" data-line="405"></span></a>					<span class="n">m_accent</span><span class="p">.</span><span class="n">add_accent</span><span class="p">(</span><span class="n">feminine</span><span class="p">,</span> <span class="n">accent_pos</span><span class="p">,</span> <span class="n">options</span><span class="p">),</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos" data-line="406"></span></a>					<span class="n">m_accent</span><span class="p">.</span><span class="n">add_accent</span><span class="p">(</span><span class="n">neuter</span><span class="p">,</span> <span class="n">accent_pos</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos" data-line="407"></span></a>			<span class="kr">end</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos" data-line="408"></span></a>		<span class="kr">end</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos" data-line="409"></span></a>	<span class="kr">end</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos" data-line="410"></span></a>	
</span><span id="L-411"><a href="#L-411"><span class="linenos" data-line="411"></span></a>	<span class="kr">return</span> <span class="n">decl</span><span class="p">,</span> <span class="n">feminine</span><span class="p">,</span> <span class="n">neuter</span><span class="p">,</span> <span class="n">lemma</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos" data-line="412"></span></a><span class="kr">end</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos" data-line="413"></span></a><span class="n">export</span><span class="p">.</span><span class="n">get_participle_information</span> <span class="o">=</span> <span class="n">get_participle_information</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos" data-line="414"></span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos" data-line="415"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">needs_head_parameter</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos" data-line="416"></span></a>	<span class="kr">return</span> <span class="n">nonmainspace</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">:</span><span class="n">find</span> <span class="s2">&quot;&#39;&quot;</span> <span class="ow">or</span> <span class="n">has_ambiguous_vowel</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos" data-line="417"></span></a><span class="kr">end</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos" data-line="418"></span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos" data-line="419"></span></a><span class="kd">local</span> <span class="n">dialect_abbr</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos" data-line="420"></span></a>	<span class="p">[</span><span class="s2">&quot;aio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Aeolic Greek&quot;</span><span class="p">,</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos" data-line="421"></span></a>	<span class="p">[</span><span class="s2">&quot;ark&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Arcadocypriot&quot;</span><span class="p">,</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos" data-line="422"></span></a>	<span class="p">[</span><span class="s2">&quot;att&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Attic&quot;</span><span class="p">,</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos" data-line="423"></span></a>	<span class="p">[</span><span class="s2">&quot;boi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Boeotian&quot;</span><span class="p">,</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos" data-line="424"></span></a>	<span class="p">[</span><span class="s2">&quot;del&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Delphic&quot;</span><span class="p">,</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos" data-line="425"></span></a>	<span class="p">[</span><span class="s2">&quot;dor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Doric&quot;</span><span class="p">,</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos" data-line="426"></span></a>	<span class="p">[</span><span class="s2">&quot;ele&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Elean&quot;</span><span class="p">,</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos" data-line="427"></span></a>	<span class="p">[</span><span class="s2">&quot;epi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Epic&quot;</span><span class="p">,</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos" data-line="428"></span></a>	<span class="p">[</span><span class="s2">&quot;hom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Homeric&quot;</span><span class="p">,</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos" data-line="429"></span></a>	<span class="p">[</span><span class="s2">&quot;ion&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Ionic&quot;</span><span class="p">,</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos" data-line="430"></span></a>	<span class="p">[</span><span class="s2">&quot;koi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Koine&quot;</span><span class="p">,</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos" data-line="431"></span></a>	<span class="p">[</span><span class="s2">&quot;kre&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Cretan&quot;</span><span class="p">,</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos" data-line="432"></span></a>	<span class="p">[</span><span class="s2">&quot;lak&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Lacedaemonian&quot;</span><span class="p">,</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos" data-line="433"></span></a>	<span class="p">[</span><span class="s2">&quot;lok&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Locrian&quot;</span><span class="p">,</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos" data-line="434"></span></a>	<span class="p">[</span><span class="s2">&quot;lur&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Lyric&quot;</span><span class="p">,</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos" data-line="435"></span></a>	<span class="p">[</span><span class="s2">&quot;muk&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Mycenaean&quot;</span><span class="p">,</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos" data-line="436"></span></a>	<span class="p">[</span><span class="s2">&quot;pam&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Pamphylian&quot;</span><span class="p">,</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos" data-line="437"></span></a>	<span class="p">[</span><span class="s2">&quot;pho&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Phocian&quot;</span><span class="p">,</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos" data-line="438"></span></a>	<span class="p">[</span><span class="s2">&quot;poi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;poetic&quot;</span><span class="p">,</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos" data-line="439"></span></a>	<span class="p">[</span><span class="s2">&quot;the&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Thessalian&quot;</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos" data-line="440"></span></a><span class="p">}</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos" data-line="441"></span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos" data-line="442"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">make_term_label</span><span class="p">(</span><span class="n">dialect_code</span><span class="p">)</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos" data-line="443"></span></a>	<span class="kr">if</span> <span class="ow">not</span> <span class="n">dialect_code</span> <span class="kr">then</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos" data-line="444"></span></a>		<span class="kr">return</span> <span class="kc">nil</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos" data-line="445"></span></a>	<span class="kr">end</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos" data-line="446"></span></a>	
</span><span id="L-447"><a href="#L-447"><span class="linenos" data-line="447"></span></a>	<span class="kd">local</span> <span class="n">dialect</span> <span class="o">=</span> <span class="n">dialect_abbr</span><span class="p">[</span><span class="n">dialect_code</span><span class="p">]</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos" data-line="448"></span></a>	<span class="kr">if</span> <span class="n">dialect</span> <span class="kr">then</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos" data-line="449"></span></a>		<span class="kr">return</span> <span class="s2">&quot; {{tlb|grc|&quot;</span> <span class="o">..</span> <span class="n">dialect</span> <span class="o">..</span> <span class="s2">&quot;}}&quot;</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos" data-line="450"></span></a>	<span class="kr">else</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos" data-line="451"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The dialect code &quot;</span> <span class="o">..</span> <span class="n">dialect_code</span> <span class="o">..</span> <span class="s2">&quot; was not recognized.&quot;</span><span class="p">)</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos" data-line="452"></span></a>	<span class="kr">end</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos" data-line="453"></span></a><span class="kr">end</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos" data-line="454"></span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos" data-line="455"></span></a><span class="kd">local</span> <span class="n">templates</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos" data-line="456"></span></a>	<span class="n">language_header</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos" data-line="457"></span></a><span class="s">==Ancient Greek==</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos" data-line="458"></span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos" data-line="459"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos" data-line="460"></span></a>	<span class="n">etymology</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos" data-line="461"></span></a><span class="s">===Etymology===</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos" data-line="462"></span></a><span class="s">{{{etym}}}</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos" data-line="463"></span></a>
</span><span id="L-464"><a href="#L-464"><span class="linenos" data-line="464"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos" data-line="465"></span></a>	<span class="n">pronunciation</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos" data-line="466"></span></a><span class="s">===Pronunciation===</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos" data-line="467"></span></a><span class="s">{{grc-IPA{{{pronunciation}}}}}</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos" data-line="468"></span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos" data-line="469"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos" data-line="470"></span></a>	<span class="n">noun</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos" data-line="471"></span></a><span class="s">===Noun===</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos" data-line="472"></span></a><span class="s">{{grc-noun{{{head}}}|{{{genitive}}}|{{{gender}}}|{{{declension}}}}}{{{dialectlabel}}}</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos" data-line="473"></span></a>
</span><span id="L-474"><a href="#L-474"><span class="linenos" data-line="474"></span></a><span class="s"># {{{definition1}}}</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos" data-line="475"></span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos" data-line="476"></span></a><span class="s">====Declension====</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos" data-line="477"></span></a><span class="s">{{grc-decl|{{{pagename}}}|{{{genitive}}}{{{form}}}{{{dialect}}}}}</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos" data-line="478"></span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos" data-line="479"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos" data-line="480"></span></a>	<span class="n">adjective</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos" data-line="481"></span></a><span class="s">===Adjective===</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos" data-line="482"></span></a><span class="s">{{grc-adj-{{{declensions}}}{{{head}}}{{{feminine}}}{{{neuter}}}}}</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos" data-line="483"></span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos" data-line="484"></span></a><span class="s"># {{{definition1}}}</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos" data-line="485"></span></a>
</span><span id="L-486"><a href="#L-486"><span class="linenos" data-line="486"></span></a><span class="s">====Declension====</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos" data-line="487"></span></a><span class="s">{{grc-adecl|{{{masculine_or_stem}}}{{{feminine_or_neuter}}}{{{form}}}{{{dialect}}}}}</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos" data-line="488"></span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos" data-line="489"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos" data-line="490"></span></a>	<span class="n">participle</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos" data-line="491"></span></a><span class="s">===Participle===</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos" data-line="492"></span></a><span class="s">{{grc-part-{{{declensions}}}{{{head}}}{{{feminine}}}{{{neuter}}}}}</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos" data-line="493"></span></a>
</span><span id="L-494"><a href="#L-494"><span class="linenos" data-line="494"></span></a><span class="s"># {{inflection of|grc|{{{lemma}}}||{{{infl}}}|part}}</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos" data-line="495"></span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos" data-line="496"></span></a><span class="s">====Declension====</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos" data-line="497"></span></a><span class="s">{{grc-adecl|{{{masculine_or_stem}}}{{{feminine_or_neuter}}}{{{form}}}{{{dialect}}}}}</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos" data-line="498"></span></a>
</span><span id="L-499"><a href="#L-499"><span class="linenos" data-line="499"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos" data-line="500"></span></a>	<span class="n">verb</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos" data-line="501"></span></a><span class="s">===Verb===</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos" data-line="502"></span></a><span class="s">{{grc-verb{{{head}}}}}</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos" data-line="503"></span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos" data-line="504"></span></a><span class="s"># {{{definition1}}}</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos" data-line="505"></span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos" data-line="506"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos" data-line="507"></span></a>	<span class="n">verb_form</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos" data-line="508"></span></a><span class="s">===Verb===</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos" data-line="509"></span></a><span class="s">{{grc-verb form{{{head}}}}}{{{dialect}}}</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos" data-line="510"></span></a>
</span><span id="L-511"><a href="#L-511"><span class="linenos" data-line="511"></span></a><span class="s"># {{{definition1}}}</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos" data-line="512"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos" data-line="513"></span></a>	<span class="n">ref_header</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos" data-line="514"></span></a><span class="s">===Further reading===</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos" data-line="515"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos" data-line="516"></span></a>	<span class="n">lsj</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos" data-line="517"></span></a><span class="s">* {{R:LSJ{{{LSJheadword}}}}}</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos" data-line="518"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos" data-line="519"></span></a>	<span class="n">middle</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos" data-line="520"></span></a><span class="s">* {{R:Middle Liddell{{{Middleheadword}}}}}</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos" data-line="521"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos" data-line="522"></span></a>	<span class="n">cunliffe</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos" data-line="523"></span></a><span class="s">* {{R:Cunliffe{{{Cunliffeheadword}}}}}</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos" data-line="524"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos" data-line="525"></span></a>	<span class="n">autenrieth</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos" data-line="526"></span></a><span class="s">* {{R:Autenrieth{{{Autenriethheadword}}}}}</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos" data-line="527"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos" data-line="528"></span></a>	<span class="n">slater</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos" data-line="529"></span></a><span class="s">* {{R:Slater{{{Slaterheadword}}}}}</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos" data-line="530"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos" data-line="531"></span></a>	<span class="n">dge</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos" data-line="532"></span></a><span class="s">* {{R:DGE{{{DGEheadword}}}}}</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos" data-line="533"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos" data-line="534"></span></a>	<span class="n">inflection_of</span> <span class="o">=</span> <span class="s">[=[</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos" data-line="535"></span></a><span class="s">{{inflection of|grc|{{{lemma}}}||{{{inflection_categories}}}}}</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos" data-line="536"></span></a><span class="s">]=]</span><span class="p">,</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos" data-line="537"></span></a><span class="p">}</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos" data-line="538"></span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos" data-line="539"></span></a><span class="kd">local</span> <span class="n">noun_decl</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos" data-line="540"></span></a>	<span class="n">first</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">third</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos" data-line="541"></span></a><span class="p">}</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos" data-line="542"></span></a><span class="kd">local</span> <span class="n">adj_decl</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos" data-line="543"></span></a>	<span class="p">[</span><span class="s2">&quot;1&amp;2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;1&amp;3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;2nd&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;3rd&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos" data-line="544"></span></a><span class="p">}</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos" data-line="545"></span></a>
</span><span id="L-546"><a href="#L-546"><span class="linenos" data-line="546"></span></a><span class="kd">local</span> <span class="n">pos_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos" data-line="547"></span></a>
</span><span id="L-548"><a href="#L-548"><span class="linenos" data-line="548"></span></a><span class="n">pos_data</span><span class="p">.</span><span class="n">noun</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos" data-line="549"></span></a>	<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos" data-line="550"></span></a>		<span class="n">gen</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos" data-line="551"></span></a>		<span class="n">g</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos" data-line="552"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos" data-line="553"></span></a>		<span class="n">def</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos" data-line="554"></span></a>		<span class="n">dial</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos" data-line="555"></span></a>		<span class="n">form</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos" data-line="556"></span></a>	<span class="p">},</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos" data-line="557"></span></a>	<span class="n">grc_params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos" data-line="558"></span></a>		<span class="n">gen</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos" data-line="559"></span></a>	<span class="p">},</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos" data-line="560"></span></a>	<span class="n">func</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos" data-line="561"></span></a>		<span class="kd">local</span> <span class="n">head</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos" data-line="562"></span></a>		<span class="kd">local</span> <span class="n">decl</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">decl</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos" data-line="563"></span></a>		<span class="kr">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">decl</span> <span class="ow">and</span> <span class="n">noun_decl</span><span class="p">[</span><span class="n">decl</span><span class="p">])</span> <span class="kr">then</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos" data-line="564"></span></a>			<span class="c1">-- Allow 1, 2, 3 or 1st, 2nd, 3rd.</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos" data-line="565"></span></a>			<span class="kd">local</span> <span class="n">number</span> <span class="o">=</span> <span class="n">decl</span> <span class="ow">and</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">decl</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;^%d+&quot;</span><span class="p">))</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos" data-line="566"></span></a>			<span class="kr">if</span> <span class="n">number</span> <span class="kr">then</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos" data-line="567"></span></a>				<span class="n">decl</span> <span class="o">=</span> <span class="p">({</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;third&quot;</span> <span class="p">})[</span><span class="n">number</span><span class="p">]</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos" data-line="568"></span></a>			<span class="kr">end</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos" data-line="569"></span></a>			
</span><span id="L-570"><a href="#L-570"><span class="linenos" data-line="570"></span></a>			<span class="kr">if</span> <span class="ow">not</span> <span class="n">decl</span> <span class="kr">then</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos" data-line="571"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Please supply a valid declension: first, second, or third.&quot;</span><span class="p">)</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos" data-line="572"></span></a>			<span class="kr">end</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos" data-line="573"></span></a>		<span class="kr">end</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos" data-line="574"></span></a>		
</span><span id="L-575"><a href="#L-575"><span class="linenos" data-line="575"></span></a>		<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos" data-line="576"></span></a>			<span class="n">genitive</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">gen</span><span class="p">,</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos" data-line="577"></span></a>			<span class="n">gender</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">g</span><span class="p">,</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos" data-line="578"></span></a>			<span class="n">declension</span> <span class="o">=</span> <span class="n">decl</span><span class="p">,</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos" data-line="579"></span></a>			<span class="n">dialectlabel</span> <span class="o">=</span> <span class="n">make_term_label</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">dial</span><span class="p">),</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos" data-line="580"></span></a>			<span class="n">definition1</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">def</span><span class="p">,</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos" data-line="581"></span></a>			<span class="n">pagename</span> <span class="o">=</span> <span class="n">head</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">,</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos" data-line="582"></span></a>			<span class="n">dialect</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">dial</span><span class="p">,</span> <span class="s2">&quot;dial&quot;</span><span class="p">),</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos" data-line="583"></span></a>			<span class="n">form</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">form</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span><span class="p">),</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos" data-line="584"></span></a>		<span class="p">}</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos" data-line="585"></span></a>		
</span><span id="L-586"><a href="#L-586"><span class="linenos" data-line="586"></span></a>		<span class="kd">local</span> <span class="n">template</span> <span class="o">=</span> <span class="n">templates</span><span class="p">.</span><span class="n">language_header</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos" data-line="587"></span></a>			<span class="o">..</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">etym</span> <span class="ow">and</span> <span class="n">templates</span><span class="p">.</span><span class="n">etymology</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos" data-line="588"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">pronunciation</span> <span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">noun</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos" data-line="589"></span></a>		
</span><span id="L-590"><a href="#L-590"><span class="linenos" data-line="590"></span></a>		<span class="kr">return</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos" data-line="591"></span></a>	<span class="kr">end</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos" data-line="592"></span></a><span class="p">}</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos" data-line="593"></span></a>
</span><span id="L-594"><a href="#L-594"><span class="linenos" data-line="594"></span></a><span class="n">pos_data</span><span class="p">.</span><span class="n">verb</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos" data-line="595"></span></a>	<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos" data-line="596"></span></a>		<span class="n">def</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos" data-line="597"></span></a>	<span class="p">},</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos" data-line="598"></span></a>	<span class="n">grc_params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos" data-line="599"></span></a>		
</span><span id="L-600"><a href="#L-600"><span class="linenos" data-line="600"></span></a>	<span class="p">},</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos" data-line="601"></span></a>	<span class="n">func</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos" data-line="602"></span></a>		<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos" data-line="603"></span></a>			<span class="n">definition1</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">def</span><span class="p">,</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos" data-line="604"></span></a>		<span class="p">}</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos" data-line="605"></span></a>		
</span><span id="L-606"><a href="#L-606"><span class="linenos" data-line="606"></span></a>		<span class="kd">local</span> <span class="n">template</span> <span class="o">=</span> <span class="n">templates</span><span class="p">.</span><span class="n">language_header</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos" data-line="607"></span></a>			<span class="o">..</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">etym</span> <span class="ow">and</span> <span class="n">templates</span><span class="p">.</span><span class="n">etymology</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos" data-line="608"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">pronunciation</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos" data-line="609"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">verb</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos" data-line="610"></span></a>		
</span><span id="L-611"><a href="#L-611"><span class="linenos" data-line="611"></span></a>		<span class="kr">return</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos" data-line="612"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos" data-line="613"></span></a><span class="p">}</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos" data-line="614"></span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos" data-line="615"></span></a><span class="n">pos_data</span><span class="p">.</span><span class="n">adjective</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos" data-line="616"></span></a>	<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos" data-line="617"></span></a>		<span class="n">fem</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos" data-line="618"></span></a>		<span class="n">f</span> <span class="o">=</span> <span class="p">{</span> <span class="n">alias_of</span> <span class="o">=</span> <span class="s2">&quot;fem&quot;</span> <span class="p">},</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos" data-line="619"></span></a>		<span class="n">neut</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos" data-line="620"></span></a>		<span class="n">n</span> <span class="o">=</span> <span class="p">{</span> <span class="n">alias_of</span> <span class="o">=</span> <span class="s2">&quot;neut&quot;</span> <span class="p">},</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos" data-line="621"></span></a>		<span class="n">def</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos" data-line="622"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos" data-line="623"></span></a>		<span class="n">dial</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos" data-line="624"></span></a>		<span class="n">form</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos" data-line="625"></span></a>	<span class="p">},</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos" data-line="626"></span></a>	<span class="n">grc_params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos" data-line="627"></span></a>		<span class="n">fem</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos" data-line="628"></span></a>		<span class="n">neut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos" data-line="629"></span></a>	<span class="p">},</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos" data-line="630"></span></a>	<span class="n">func</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos" data-line="631"></span></a>		<span class="kd">local</span> <span class="n">stem_in_decl_template</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">decl</span> <span class="o">==</span> <span class="s2">&quot;3rd&quot;</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos" data-line="632"></span></a>		<span class="kd">local</span> <span class="n">head</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos" data-line="633"></span></a>		<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos" data-line="634"></span></a>			<span class="n">declensions</span> <span class="o">=</span> <span class="n">adj_decl</span><span class="p">[</span><span class="n">args</span><span class="p">.</span><span class="n">decl</span><span class="p">]</span> <span class="ow">and</span> <span class="n">args</span><span class="p">.</span><span class="n">decl</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos" data-line="635"></span></a>				<span class="ow">or</span> <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The adjective declension code &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">decl</span><span class="p">)</span> <span class="o">..</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos" data-line="636"></span></a>				<span class="s2">&quot; was not recognized.&quot;</span><span class="p">),</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos" data-line="637"></span></a>			<span class="n">feminine</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">fem</span><span class="p">),</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos" data-line="638"></span></a>			<span class="n">neuter</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">neut</span><span class="p">),</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos" data-line="639"></span></a>			<span class="n">dialectlabel</span> <span class="o">=</span> <span class="n">make_term_label</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">dial</span><span class="p">),</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos" data-line="640"></span></a>			<span class="n">definition1</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">def</span><span class="p">,</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos" data-line="641"></span></a>			<span class="n">masculine_or_stem</span> <span class="o">=</span> <span class="n">stem_in_decl_template</span> <span class="ow">and</span> <span class="n">args</span><span class="p">.</span><span class="n">neut</span> <span class="ow">or</span> <span class="n">head</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">,</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos" data-line="642"></span></a>			<span class="n">feminine_or_neuter</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="ow">not</span> <span class="n">stem_in_decl_template</span> <span class="ow">and</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">fem</span> <span class="ow">or</span> <span class="n">args</span><span class="p">.</span><span class="n">neut</span><span class="p">)),</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos" data-line="643"></span></a>		<span class="p">}</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos" data-line="644"></span></a>		
</span><span id="L-645"><a href="#L-645"><span class="linenos" data-line="645"></span></a>		<span class="kd">local</span> <span class="n">template</span> <span class="o">=</span> <span class="n">templates</span><span class="p">.</span><span class="n">language_header</span> <span class="o">..</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">etym</span> <span class="ow">and</span> <span class="n">templates</span><span class="p">.</span><span class="n">etymology</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">pronunciation</span> <span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">adjective</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos" data-line="646"></span></a>		
</span><span id="L-647"><a href="#L-647"><span class="linenos" data-line="647"></span></a>		<span class="kr">return</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos" data-line="648"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos" data-line="649"></span></a><span class="p">}</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos" data-line="650"></span></a>
</span><span id="L-651"><a href="#L-651"><span class="linenos" data-line="651"></span></a><span class="n">pos_data</span><span class="p">.</span><span class="n">participle</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos" data-line="652"></span></a>	<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos" data-line="653"></span></a>		<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="n">list</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos" data-line="654"></span></a>		<span class="n">fem</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos" data-line="655"></span></a>		<span class="n">f</span> <span class="o">=</span> <span class="p">{</span> <span class="n">alias_of</span> <span class="o">=</span> <span class="s2">&quot;fem&quot;</span> <span class="p">},</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos" data-line="656"></span></a>		<span class="n">neut</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos" data-line="657"></span></a>		<span class="n">n</span> <span class="o">=</span> <span class="p">{</span> <span class="n">alias_of</span> <span class="o">=</span> <span class="s2">&quot;neut&quot;</span> <span class="p">},</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos" data-line="658"></span></a>		<span class="n">con</span> <span class="o">=</span> <span class="p">{},</span> <span class="c1">-- contraction vowel</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos" data-line="659"></span></a>		<span class="n">lemma</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos" data-line="660"></span></a>		<span class="n">infl</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos" data-line="661"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos" data-line="662"></span></a>		<span class="n">dial</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos" data-line="663"></span></a>		<span class="n">form</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos" data-line="664"></span></a>	<span class="p">},</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos" data-line="665"></span></a>	<span class="n">grc_params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos" data-line="666"></span></a>		<span class="n">fem</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos" data-line="667"></span></a>		<span class="n">neut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos" data-line="668"></span></a>		<span class="n">lemma</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos" data-line="669"></span></a>	<span class="p">},</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos" data-line="670"></span></a>	<span class="n">process_args</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos" data-line="671"></span></a>		<span class="kd">local</span> <span class="n">numbered_params</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos" data-line="672"></span></a>		<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="kr">then</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos" data-line="673"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Too many numbered parameters: &quot;</span> <span class="o">..</span> <span class="p">(</span><span class="o">#</span><span class="n">numbered_params</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;, expected 3 or 4.&quot;</span><span class="p">)</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos" data-line="674"></span></a>		<span class="kr">end</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos" data-line="675"></span></a>		
</span><span id="L-676"><a href="#L-676"><span class="linenos" data-line="676"></span></a>		<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos" data-line="677"></span></a>			<span class="kr">if</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="ow">or</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span> <span class="ow">or</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="kr">then</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos" data-line="678"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos" data-line="679"></span></a>			<span class="kr">end</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos" data-line="680"></span></a>			
</span><span id="L-681"><a href="#L-681"><span class="linenos" data-line="681"></span></a>			<span class="kr">if</span> <span class="n">needs_head_parameter</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos" data-line="682"></span></a>				<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">3</span> <span class="kr">then</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos" data-line="683"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos" data-line="684"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos" data-line="685"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos" data-line="686"></span></a>						<span class="n">numbered_params</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos" data-line="687"></span></a>				<span class="kr">elseif</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos" data-line="688"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos" data-line="689"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos" data-line="690"></span></a>						<span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos" data-line="691"></span></a>				<span class="kr">else</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos" data-line="692"></span></a>					<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Expected three positional parameters: headword, lemma, inflectional categories.&quot;</span><span class="p">)</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos" data-line="693"></span></a>				<span class="kr">end</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos" data-line="694"></span></a>			<span class="kr">else</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos" data-line="695"></span></a>				<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos" data-line="696"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">lemma</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos" data-line="697"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos" data-line="698"></span></a>						<span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos" data-line="699"></span></a>				<span class="kr">elseif</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos" data-line="700"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span> <span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos" data-line="701"></span></a>				<span class="kr">else</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos" data-line="702"></span></a>					<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Expected two positional parameters: lemma and inflectional categories&quot;</span><span class="p">)</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos" data-line="703"></span></a>				<span class="kr">end</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos" data-line="704"></span></a>			<span class="kr">end</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos" data-line="705"></span></a>		<span class="kr">end</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos" data-line="706"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos" data-line="707"></span></a>	<span class="n">func</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos" data-line="708"></span></a>		<span class="kd">local</span> <span class="n">stem_in_decl_template</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">decl</span> <span class="o">==</span> <span class="s2">&quot;3rd&quot;</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos" data-line="709"></span></a>		<span class="kd">local</span> <span class="n">head</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos" data-line="710"></span></a>		
</span><span id="L-711"><a href="#L-711"><span class="linenos" data-line="711"></span></a>		<span class="kd">local</span> <span class="n">decl</span><span class="p">,</span> <span class="n">feminine</span><span class="p">,</span> <span class="n">neuter</span><span class="p">,</span> <span class="n">lemma</span> <span class="o">=</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos" data-line="712"></span></a>			<span class="n">get_participle_information</span><span class="p">(</span><span class="n">head</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">con</span><span class="p">)</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos" data-line="713"></span></a>		
</span><span id="L-714"><a href="#L-714"><span class="linenos" data-line="714"></span></a>		<span class="n">feminine</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">fem</span> <span class="ow">or</span> <span class="n">feminine</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos" data-line="715"></span></a>		<span class="n">neuter</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">neut</span> <span class="ow">or</span> <span class="n">neuter</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos" data-line="716"></span></a>		<span class="n">decl</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">decl</span> <span class="ow">and</span> <span class="n">adj_decl</span><span class="p">[</span><span class="n">args</span><span class="p">.</span><span class="n">decl</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">decl</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos" data-line="717"></span></a>			<span class="ow">or</span> <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The adjective declension code &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">decl</span><span class="p">)</span> <span class="o">..</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos" data-line="718"></span></a>			<span class="s2">&quot; was not recognized.&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="n">decl</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos" data-line="719"></span></a>		<span class="kr">if</span> <span class="n">lemma</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span> <span class="ow">and</span> <span class="n">mw</span><span class="p">.</span><span class="n">ustring</span><span class="p">.</span><span class="n">toNFC</span><span class="p">(</span><span class="n">head</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">):</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;όμενος$&quot;</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos" data-line="720"></span></a>			<span class="kr">if</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="kr">then</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos" data-line="721"></span></a>				<span class="kd">local</span> <span class="n">tense</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;^%S+&quot;</span><span class="p">)</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos" data-line="722"></span></a>				
</span><span id="L-723"><a href="#L-723"><span class="linenos" data-line="723"></span></a>				<span class="kr">if</span> <span class="n">tense</span> <span class="o">~=</span> <span class="s2">&quot;present&quot;</span> <span class="kr">then</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos" data-line="724"></span></a>					<span class="kd">local</span> <span class="n">form_of_data</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;Module:form of/data&quot;</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos" data-line="725"></span></a>					<span class="n">tense</span> <span class="o">=</span> <span class="n">form_of_data</span><span class="p">.</span><span class="n">shortcuts</span><span class="p">[</span><span class="n">tense</span><span class="p">]</span> <span class="ow">or</span> <span class="n">tense</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos" data-line="726"></span></a>				<span class="kr">end</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos" data-line="727"></span></a>				
</span><span id="L-728"><a href="#L-728"><span class="linenos" data-line="728"></span></a>				<span class="kr">if</span> <span class="n">tense</span> <span class="o">~=</span> <span class="s2">&quot;present&quot;</span> <span class="kr">then</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos" data-line="729"></span></a>					<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Not a present-tense participle; please supply lemma.&quot;</span><span class="p">)</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos" data-line="730"></span></a>				<span class="kr">end</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos" data-line="731"></span></a>			<span class="kr">end</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos" data-line="732"></span></a>		<span class="kr">end</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos" data-line="733"></span></a>		<span class="n">lemma</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span> <span class="ow">or</span> <span class="n">lemma</span> <span class="ow">or</span> <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Please supply the lemma of this participle.&quot;</span><span class="p">)</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos" data-line="734"></span></a>		
</span><span id="L-735"><a href="#L-735"><span class="linenos" data-line="735"></span></a>		<span class="kr">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">feminine</span> <span class="ow">and</span> <span class="n">neuter</span> <span class="ow">and</span> <span class="n">decl</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos" data-line="736"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Either the declension or the feminine or neuter form could not be automatically determined. &quot;</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos" data-line="737"></span></a>				<span class="o">..</span> <span class="s2">&quot;Please supply them in the |decl=, |f=, or |n= parameters.&quot;</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos" data-line="738"></span></a>		<span class="kr">end</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos" data-line="739"></span></a>		
</span><span id="L-740"><a href="#L-740"><span class="linenos" data-line="740"></span></a>		<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos" data-line="741"></span></a>			<span class="n">declensions</span> <span class="o">=</span> <span class="n">decl</span><span class="p">,</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos" data-line="742"></span></a>			<span class="n">feminine</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">feminine</span><span class="p">),</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos" data-line="743"></span></a>			<span class="n">neuter</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">neuter</span><span class="p">),</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos" data-line="744"></span></a>			<span class="n">dialectlabel</span> <span class="o">=</span> <span class="n">make_term_label</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">dial</span><span class="p">),</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos" data-line="745"></span></a>			<span class="n">lemma</span> <span class="o">=</span> <span class="n">lemma</span><span class="p">,</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos" data-line="746"></span></a>			<span class="n">infl</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">),</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos" data-line="747"></span></a>			<span class="n">masculine_or_stem</span> <span class="o">=</span> <span class="n">head</span> <span class="ow">or</span> <span class="n">pagename</span><span class="p">,</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos" data-line="748"></span></a>			<span class="n">feminine_or_neuter</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">feminine</span> <span class="ow">or</span> <span class="n">neuter</span><span class="p">),</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos" data-line="749"></span></a>		<span class="p">}</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos" data-line="750"></span></a>		
</span><span id="L-751"><a href="#L-751"><span class="linenos" data-line="751"></span></a>		<span class="kd">local</span> <span class="n">template</span> <span class="o">=</span> <span class="n">templates</span><span class="p">.</span><span class="n">language_header</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos" data-line="752"></span></a>			<span class="o">..</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">etym</span> <span class="ow">and</span> <span class="n">templates</span><span class="p">.</span><span class="n">etymology</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos" data-line="753"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">pronunciation</span> <span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">participle</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos" data-line="754"></span></a>		
</span><span id="L-755"><a href="#L-755"><span class="linenos" data-line="755"></span></a>		<span class="kr">return</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos" data-line="756"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos" data-line="757"></span></a><span class="p">}</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos" data-line="758"></span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos" data-line="759"></span></a><span class="n">pos_data</span><span class="p">.</span><span class="n">verb_form</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos" data-line="760"></span></a>	<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos" data-line="761"></span></a>		<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="n">list</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos" data-line="762"></span></a>		<span class="n">lemma</span> <span class="o">=</span> <span class="p">{},</span> <span class="c1">-- Make into list parameter?</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos" data-line="763"></span></a>		<span class="n">infl</span> <span class="o">=</span> <span class="p">{},</span> <span class="c1">-- Make into list parameter?</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos" data-line="764"></span></a>		<span class="n">dial</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos" data-line="765"></span></a>	<span class="p">},</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos" data-line="766"></span></a>	<span class="n">grc_params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos" data-line="767"></span></a>		<span class="n">lemma</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos" data-line="768"></span></a>	<span class="p">},</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos" data-line="769"></span></a>	<span class="n">process_args</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos" data-line="770"></span></a>		<span class="kd">local</span> <span class="n">numbered_params</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos" data-line="771"></span></a>		<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="kr">then</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos" data-line="772"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Too many numbered parameters: &quot;</span> <span class="o">..</span> <span class="p">(</span><span class="o">#</span><span class="n">numbered_params</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;, expected 3 or 4.&quot;</span><span class="p">)</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos" data-line="773"></span></a>		<span class="kr">end</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos" data-line="774"></span></a>		
</span><span id="L-775"><a href="#L-775"><span class="linenos" data-line="775"></span></a>		<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos" data-line="776"></span></a>			<span class="kr">if</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="ow">or</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span> <span class="ow">or</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="kr">then</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos" data-line="777"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos" data-line="778"></span></a>			<span class="kr">end</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos" data-line="779"></span></a>			
</span><span id="L-780"><a href="#L-780"><span class="linenos" data-line="780"></span></a>			<span class="kr">if</span> <span class="n">needs_head_parameter</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos" data-line="781"></span></a>				<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">3</span> <span class="kr">then</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos" data-line="782"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos" data-line="783"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos" data-line="784"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos" data-line="785"></span></a>						<span class="n">numbered_params</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos" data-line="786"></span></a>				<span class="kr">else</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos" data-line="787"></span></a>					<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Expected three positional parameters: headword, lemma, inflectional categories.&quot;</span><span class="p">)</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos" data-line="788"></span></a>				<span class="kr">end</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos" data-line="789"></span></a>			<span class="kr">else</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos" data-line="790"></span></a>				<span class="kr">if</span> <span class="o">#</span><span class="n">numbered_params</span> <span class="o">==</span> <span class="mi">2</span> <span class="kr">then</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos" data-line="791"></span></a>					<span class="n">args</span><span class="p">.</span><span class="n">lemma</span><span class="p">,</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="o">=</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos" data-line="792"></span></a>						<span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">numbered_params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos" data-line="793"></span></a>						<span class="n">numbered_params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos" data-line="794"></span></a>				<span class="kr">else</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos" data-line="795"></span></a>					<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Expected two positional parameters: lemma and inflectional categories&quot;</span><span class="p">)</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos" data-line="796"></span></a>				<span class="kr">end</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos" data-line="797"></span></a>			<span class="kr">end</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos" data-line="798"></span></a>		<span class="kr">end</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos" data-line="799"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos" data-line="800"></span></a>	<span class="n">func</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos" data-line="801"></span></a>		<span class="kr">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span> <span class="kr">then</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos" data-line="802"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Please provide lemma argument for {{inflection of}} in |lemma= parameter.&quot;</span><span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos" data-line="803"></span></a>		<span class="kr">end</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos" data-line="804"></span></a>		
</span><span id="L-805"><a href="#L-805"><span class="linenos" data-line="805"></span></a>		<span class="kr">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span> <span class="kr">then</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos" data-line="806"></span></a>			<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Please provide inflection category arguments for {{inflection of}} in |infl= parameter.&quot;</span><span class="p">)</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos" data-line="807"></span></a>		<span class="kr">end</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos" data-line="808"></span></a>		
</span><span id="L-809"><a href="#L-809"><span class="linenos" data-line="809"></span></a>		<span class="kd">local</span> <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos" data-line="810"></span></a>			<span class="n">definition1</span> <span class="o">=</span> <span class="n">add_content</span><span class="p">(</span><span class="n">templates</span><span class="p">.</span><span class="n">inflection_of</span><span class="p">,</span> <span class="p">{</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos" data-line="811"></span></a>				<span class="n">lemma</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">lemma</span><span class="p">,</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos" data-line="812"></span></a>				<span class="n">inflection_categories</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">infl</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">),</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos" data-line="813"></span></a>			<span class="p">}),</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos" data-line="814"></span></a>			<span class="n">dialect</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">dial</span> <span class="ow">and</span> <span class="s2">&quot; {{tlb|grc|&quot;</span> <span class="o">..</span> <span class="n">args</span><span class="p">.</span><span class="n">dial</span> <span class="o">..</span> <span class="s2">&quot;}}&quot;</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos" data-line="815"></span></a>		<span class="p">}</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos" data-line="816"></span></a>		
</span><span id="L-817"><a href="#L-817"><span class="linenos" data-line="817"></span></a>		<span class="kd">local</span> <span class="n">template</span> <span class="o">=</span> <span class="n">templates</span><span class="p">.</span><span class="n">language_header</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos" data-line="818"></span></a>			<span class="o">..</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">etym</span> <span class="ow">and</span> <span class="n">templates</span><span class="p">.</span><span class="n">etymology</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos" data-line="819"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">pronunciation</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos" data-line="820"></span></a>			<span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">verb_form</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos" data-line="821"></span></a>		
</span><span id="L-822"><a href="#L-822"><span class="linenos" data-line="822"></span></a>		<span class="kr">return</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos" data-line="823"></span></a>	<span class="kr">end</span><span class="p">,</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos" data-line="824"></span></a><span class="p">}</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos" data-line="825"></span></a>
</span><span id="L-826"><a href="#L-826"><span class="linenos" data-line="826"></span></a>
</span><span id="L-827"><a href="#L-827"><span class="linenos" data-line="827"></span></a><span class="kd">local</span> <span class="n">pos_aliases</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos" data-line="828"></span></a>	<span class="n">v</span> <span class="o">=</span> <span class="s2">&quot;verb&quot;</span><span class="p">,</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos" data-line="829"></span></a>	<span class="n">vf</span> <span class="o">=</span> <span class="s2">&quot;verb_form&quot;</span><span class="p">,</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos" data-line="830"></span></a><span class="p">}</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos" data-line="831"></span></a><span class="nb">setmetatable</span><span class="p">(</span><span class="n">pos_data</span><span class="p">,</span> <span class="p">{</span> <span class="n">__index</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos" data-line="832"></span></a>	<span class="kr">if</span> <span class="n">pos_aliases</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="kr">then</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos" data-line="833"></span></a>		<span class="kr">return</span> <span class="n">self</span><span class="p">[</span><span class="n">pos_aliases</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos" data-line="834"></span></a>	<span class="kr">end</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos" data-line="835"></span></a><span class="kr">end</span> <span class="p">})</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos" data-line="836"></span></a>
</span><span id="L-837"><a href="#L-837"><span class="linenos" data-line="837"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">convert_Greek_args</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">grc_params</span><span class="p">)</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos" data-line="838"></span></a>	<span class="c1">-- Convert ASCII code in the style of [[Module:typing-aids/data/grc]]</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos" data-line="839"></span></a>	<span class="c1">-- to Greek script.</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos" data-line="840"></span></a>	<span class="kd">local</span> <span class="n">forms_with_ambiguous_vowels</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:array&quot;</span><span class="p">)()</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos" data-line="841"></span></a>	<span class="kr">for</span> <span class="n">k</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">grc_params</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos" data-line="842"></span></a>		<span class="kd">local</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos" data-line="843"></span></a>		<span class="kr">if</span> <span class="n">arg</span> <span class="kr">then</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos" data-line="844"></span></a>			<span class="n">arg</span> <span class="o">=</span> <span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos" data-line="845"></span></a>			
</span><span id="L-846"><a href="#L-846"><span class="linenos" data-line="846"></span></a>			<span class="kr">if</span> <span class="n">has_ambiguous_vowel</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos" data-line="847"></span></a>				<span class="n">forms_with_ambiguous_vowels</span><span class="p">:</span><span class="n">insert</span> <span class="p">{</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos" data-line="848"></span></a>					<span class="n">key</span> <span class="o">=</span> <span class="n">k</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">transformed</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos" data-line="849"></span></a>				<span class="p">}</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos" data-line="850"></span></a>			<span class="kr">end</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos" data-line="851"></span></a>			
</span><span id="L-852"><a href="#L-852"><span class="linenos" data-line="852"></span></a>			<span class="n">args</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos" data-line="853"></span></a>		<span class="kr">end</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos" data-line="854"></span></a>	<span class="kr">end</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos" data-line="855"></span></a>	
</span><span id="L-856"><a href="#L-856"><span class="linenos" data-line="856"></span></a>	<span class="kr">if</span> <span class="o">#</span><span class="n">forms_with_ambiguous_vowels</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos" data-line="857"></span></a>		<span class="kd">local</span> <span class="n">agreement</span> <span class="o">=</span> <span class="o">#</span><span class="n">forms_with_ambiguous_vowels</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="s2">&quot;s&quot;</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos" data-line="858"></span></a>		<span class="kd">local</span> <span class="n">parameter_format</span> <span class="o">=</span> <span class="n">quote</span> <span class="s2">&quot;%s&quot;</span> <span class="o">..</span> <span class="s2">&quot; (&quot;</span> <span class="o">..</span> <span class="n">quote</span> <span class="s2">&quot;%s&quot;</span> <span class="o">..</span> <span class="s2">&quot; → &quot;</span> <span class="o">..</span> <span class="n">quote</span> <span class="s2">&quot;%s&quot;</span> <span class="o">..</span> <span class="s2">&quot;)&quot;</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos" data-line="859"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Mark length of α, ι, or υ in parameter&quot;</span> <span class="o">..</span> <span class="n">agreement</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos" data-line="860"></span></a>			<span class="o">..</span> <span class="s2">&quot; &quot;</span> <span class="o">..</span> <span class="n">forms_with_ambiguous_vowels</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos" data-line="861"></span></a>				<span class="p">:</span><span class="n">map</span><span class="p">(</span><span class="kr">function</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos" data-line="862"></span></a>					<span class="kr">return</span> <span class="n">parameter_format</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos" data-line="863"></span></a>						<span class="p">:</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">transformed</span><span class="p">)</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos" data-line="864"></span></a>				<span class="kr">end</span><span class="p">)</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos" data-line="865"></span></a>				<span class="p">:</span><span class="n">concat</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos" data-line="866"></span></a>			<span class="o">..</span> <span class="s2">&quot; by putting &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; after short vowels and &quot;</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos" data-line="867"></span></a>			<span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; after long ones.&quot;</span><span class="p">)</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos" data-line="868"></span></a>	<span class="kr">end</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos" data-line="869"></span></a><span class="kr">end</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos" data-line="870"></span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos" data-line="871"></span></a><span class="kd">local</span> <span class="kr">function</span> <span class="nf">process_ref_arguments</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">ref_arguments</span><span class="p">)</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos" data-line="872"></span></a>	<span class="kd">local</span> <span class="n">refs</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos" data-line="873"></span></a>	<span class="kr">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">ref</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">ref_arguments</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos" data-line="874"></span></a>		<span class="kd">local</span> <span class="n">arg_prefix</span><span class="p">,</span> <span class="n">arg_name</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos" data-line="875"></span></a>		<span class="kr">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;table&quot;</span> <span class="kr">then</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos" data-line="876"></span></a>			<span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_prefix</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos" data-line="877"></span></a>		<span class="kr">else</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos" data-line="878"></span></a>			<span class="n">arg_name</span><span class="p">,</span> <span class="n">arg_prefix</span> <span class="o">=</span> <span class="n">ref</span><span class="p">,</span> <span class="n">ref</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;^.&quot;</span><span class="p">,</span> <span class="nb">string.upper</span><span class="p">)</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos" data-line="879"></span></a>		<span class="kr">end</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos" data-line="880"></span></a>		<span class="kd">local</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">boolean_or_string</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">arg_name</span><span class="p">])</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos" data-line="881"></span></a>		<span class="kr">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="kr">then</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos" data-line="882"></span></a>			<span class="n">arg</span> <span class="o">=</span> <span class="n">Latin_to_Greek</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos" data-line="883"></span></a>		<span class="kr">end</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos" data-line="884"></span></a>		<span class="kr">if</span> <span class="n">arg</span> <span class="kr">then</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos" data-line="885"></span></a>			<span class="n">refs</span> <span class="o">=</span> <span class="n">refs</span> <span class="o">..</span> <span class="n">templates</span><span class="p">[</span><span class="n">arg_name</span><span class="p">]</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos" data-line="886"></span></a>		<span class="kr">end</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos" data-line="887"></span></a>		<span class="n">content</span><span class="p">[</span><span class="n">arg_prefix</span> <span class="o">..</span> <span class="s2">&quot;headword&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="ow">and</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos" data-line="888"></span></a>		<span class="n">args</span><span class="p">[</span><span class="n">arg_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos" data-line="889"></span></a>	<span class="kr">end</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos" data-line="890"></span></a>	<span class="kr">return</span> <span class="n">refs</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos" data-line="891"></span></a><span class="kr">end</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos" data-line="892"></span></a>
</span><span id="L-893"><a href="#L-893"><span class="linenos" data-line="893"></span></a><span class="kr">function</span> <span class="nc">export</span><span class="p">.</span><span class="nf">new</span> <span class="p">(</span><span class="n">frame</span><span class="p">)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos" data-line="894"></span></a>	<span class="kd">local</span> <span class="n">parent_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="p">:</span><span class="n">getParent</span><span class="p">()</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos" data-line="895"></span></a>	<span class="kd">local</span> <span class="n">args</span> <span class="o">=</span> <span class="n">parent_frame</span><span class="p">:</span><span class="n">getTitle</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Template:grc-new&quot;</span> <span class="ow">and</span> <span class="n">parent_frame</span><span class="p">.</span><span class="n">args</span> <span class="ow">or</span> <span class="n">frame</span><span class="p">.</span><span class="n">args</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos" data-line="896"></span></a>	<span class="kr">if</span> <span class="ow">not</span> <span class="nb">next</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="ow">and</span> <span class="n">title</span><span class="p">.</span><span class="n">fullText</span> <span class="o">==</span> <span class="s2">&quot;Template:grc-new&quot;</span> <span class="kr">then</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos" data-line="897"></span></a>		<span class="kr">return</span> <span class="kc">nil</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos" data-line="898"></span></a>	<span class="kr">end</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos" data-line="899"></span></a>	
</span><span id="L-900"><a href="#L-900"><span class="linenos" data-line="900"></span></a>	<span class="c1">-- Allow |verb form= as well as |verb_form=.</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos" data-line="901"></span></a>	<span class="kd">local</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">pos</span> <span class="ow">or</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos" data-line="902"></span></a>	<span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="ow">and</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">trim</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos" data-line="903"></span></a>	<span class="n">args</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="c1">-- needed beyond this point or not?</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos" data-line="904"></span></a>	
</span><span id="L-905"><a href="#L-905"><span class="linenos" data-line="905"></span></a>	<span class="kd">local</span> <span class="n">data</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos" data-line="906"></span></a>	<span class="kr">if</span> <span class="ow">not</span> <span class="n">pos</span> <span class="ow">or</span> <span class="n">pos</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="kr">then</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos" data-line="907"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;pos parameter is required.&quot;</span><span class="p">)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos" data-line="908"></span></a>	<span class="kr">else</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos" data-line="909"></span></a>		<span class="n">data</span> <span class="o">=</span> <span class="n">pos_data</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos" data-line="910"></span></a>		<span class="kr">if</span> <span class="ow">not</span> <span class="n">data</span> <span class="kr">then</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos" data-line="911"></span></a>			<span class="c1">-- Check for prefix matches in pos_data.</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos" data-line="912"></span></a>			<span class="kd">local</span> <span class="n">matches</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos" data-line="913"></span></a>			<span class="kd">local</span> <span class="n">patt</span> <span class="o">=</span> <span class="s2">&quot;^&quot;</span> <span class="o">..</span> <span class="nb">require</span> <span class="s2">&quot;Module:utilities&quot;</span><span class="p">.</span><span class="n">pattern_escape</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos" data-line="914"></span></a>			<span class="kr">for</span> <span class="n">pos_key</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">pos_data</span><span class="p">)</span> <span class="kr">do</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos" data-line="915"></span></a>				<span class="kr">if</span> <span class="n">pos_key</span><span class="p">:</span><span class="n">find</span><span class="p">(</span><span class="n">patt</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos" data-line="916"></span></a>					<span class="nb">table.insert</span><span class="p">(</span><span class="n">matches</span><span class="p">,</span> <span class="n">pos_key</span><span class="p">)</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos" data-line="917"></span></a>				<span class="kr">end</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos" data-line="918"></span></a>			<span class="kr">end</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos" data-line="919"></span></a>			<span class="kr">if</span> <span class="o">#</span><span class="n">matches</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos" data-line="920"></span></a>				<span class="n">data</span> <span class="o">=</span> <span class="n">pos_data</span><span class="p">[</span><span class="n">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos" data-line="921"></span></a>			<span class="kr">elseif</span> <span class="o">#</span><span class="n">matches</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos" data-line="922"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;The part of speech &quot;</span> <span class="o">..</span> <span class="n">quote</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot; is not supported.&quot;</span><span class="p">)</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos" data-line="923"></span></a>			<span class="kr">elseif</span> <span class="o">#</span><span class="n">matches</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos" data-line="924"></span></a>				<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Choose between these parts of speech: &quot;</span> <span class="o">..</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">matches</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="p">))</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos" data-line="925"></span></a>			<span class="kr">end</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos" data-line="926"></span></a>		<span class="kr">end</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos" data-line="927"></span></a>	<span class="kr">end</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos" data-line="928"></span></a>	
</span><span id="L-929"><a href="#L-929"><span class="linenos" data-line="929"></span></a>	<span class="kd">local</span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos" data-line="930"></span></a>		<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="n">alias_of</span> <span class="o">=</span> <span class="s2">&quot;pos&quot;</span> <span class="p">},</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos" data-line="931"></span></a>		<span class="n">pos</span> <span class="o">=</span> <span class="p">{</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos" data-line="932"></span></a>		<span class="n">etym</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos" data-line="933"></span></a>		<span class="n">head</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos" data-line="934"></span></a>		<span class="n">lsj</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos" data-line="935"></span></a>		<span class="n">middle</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos" data-line="936"></span></a>		<span class="n">cunliffe</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos" data-line="937"></span></a>		<span class="n">slater</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos" data-line="938"></span></a>		<span class="n">autenrieth</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos" data-line="939"></span></a>		<span class="n">dge</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos" data-line="940"></span></a>	<span class="p">}</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos" data-line="941"></span></a>	<span class="n">add_to_t</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos" data-line="942"></span></a>	<span class="n">args</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;Module:parameters&quot;</span><span class="p">).</span><span class="n">process</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos" data-line="943"></span></a>	
</span><span id="L-944"><a href="#L-944"><span class="linenos" data-line="944"></span></a>	<span class="kr">if</span> <span class="n">data</span><span class="p">.</span><span class="n">process_args</span> <span class="kr">then</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos" data-line="945"></span></a>		<span class="n">data</span><span class="p">.</span><span class="n">process_args</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos" data-line="946"></span></a>	<span class="kr">end</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos" data-line="947"></span></a>	
</span><span id="L-948"><a href="#L-948"><span class="linenos" data-line="948"></span></a>	<span class="kr">if</span> <span class="n">nonmainspace</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="kr">then</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos" data-line="949"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;head parameter required outside of mainspace.&quot;</span><span class="p">)</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos" data-line="950"></span></a>	<span class="kr">end</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos" data-line="951"></span></a>	
</span><span id="L-952"><a href="#L-952"><span class="linenos" data-line="952"></span></a>	<span class="n">convert_Greek_args</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">add_to_t</span><span class="p">({</span> <span class="n">head</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span> <span class="n">data</span><span class="p">.</span><span class="n">grc_params</span><span class="p">))</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos" data-line="953"></span></a>	
</span><span id="L-954"><a href="#L-954"><span class="linenos" data-line="954"></span></a>	<span class="kr">if</span> <span class="n">nonmainspace</span> <span class="kr">then</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos" data-line="955"></span></a>		<span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">decompose</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">)</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos" data-line="956"></span></a>		<span class="n">pagename</span> <span class="o">=</span> <span class="n">decompose</span><span class="p">(</span><span class="n">make_entry_name</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">))</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos" data-line="957"></span></a>		<span class="kr">if</span> <span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="o">==</span> <span class="n">pagename</span> <span class="kr">then</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos" data-line="958"></span></a>			<span class="n">args</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="kc">nil</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos" data-line="959"></span></a>		<span class="kr">end</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos" data-line="960"></span></a>	<span class="kr">elseif</span> <span class="n">head</span> <span class="ow">and</span> <span class="n">decompose</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">)</span> <span class="o">==</span> <span class="n">decompose</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span> <span class="kr">then</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos" data-line="961"></span></a>		<span class="nb">error</span><span class="p">(</span><span class="s2">&quot;Head parameter has been provided, but as it is identical to the &quot;</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos" data-line="962"></span></a>			<span class="o">..</span> <span class="s2">&quot;page name, it is not needed.&quot;</span><span class="p">)</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos" data-line="963"></span></a>	<span class="kr">end</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos" data-line="964"></span></a>	
</span><span id="L-965"><a href="#L-965"><span class="linenos" data-line="965"></span></a>	<span class="kd">local</span> <span class="n">template</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos" data-line="966"></span></a>	
</span><span id="L-967"><a href="#L-967"><span class="linenos" data-line="967"></span></a>	<span class="kd">local</span> <span class="n">refs</span> <span class="o">=</span> <span class="n">process_ref_arguments</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="p">{</span> <span class="p">{</span> <span class="s2">&quot;lsj&quot;</span><span class="p">,</span> <span class="s2">&quot;LSJ&quot;</span> <span class="p">},</span> <span class="s2">&quot;middle&quot;</span><span class="p">,</span> <span class="s2">&quot;cunliffe&quot;</span><span class="p">,</span> <span class="s2">&quot;slater&quot;</span><span class="p">,</span> <span class="s2">&quot;autenrieth&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;dge&quot;</span><span class="p">,</span> <span class="s2">&quot;DGE&quot;</span> <span class="p">}</span> <span class="p">})</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos" data-line="968"></span></a>	<span class="n">content</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">make_param</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">head</span><span class="p">)</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos" data-line="969"></span></a>	<span class="n">content</span><span class="p">.</span><span class="n">pronunciation</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="n">head</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos" data-line="970"></span></a>	<span class="n">content</span><span class="p">.</span><span class="n">etym</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">etym</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos" data-line="971"></span></a>	
</span><span id="L-972"><a href="#L-972"><span class="linenos" data-line="972"></span></a>	<span class="kr">if</span> <span class="n">refs</span> <span class="o">~=</span> <span class="s2">&quot;&quot;</span> <span class="kr">then</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos" data-line="973"></span></a>		<span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="o">..</span> <span class="n">templates</span><span class="p">.</span><span class="n">ref_header</span> <span class="o">..</span> <span class="n">refs</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos" data-line="974"></span></a>	<span class="kr">end</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos" data-line="975"></span></a>	
</span><span id="L-976"><a href="#L-976"><span class="linenos" data-line="976"></span></a>	<span class="kd">local</span> <span class="n">wikitext</span> <span class="o">=</span> <span class="n">add_content</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos" data-line="977"></span></a>	<span class="n">wikitext</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">trim</span><span class="p">(</span><span class="n">wikitext</span><span class="p">)</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos" data-line="978"></span></a>	
</span><span id="L-979"><a href="#L-979"><span class="linenos" data-line="979"></span></a>	<span class="kr">if</span> <span class="n">nonmainspace</span> <span class="kr">then</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos" data-line="980"></span></a>		<span class="kr">return</span> <span class="n">highlight</span><span class="p">(</span><span class="n">wikitext</span><span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos" data-line="981"></span></a>	<span class="kr">else</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos" data-line="982"></span></a>		<span class="kr">return</span> <span class="n">wikitext</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos" data-line="983"></span></a>	<span class="kr">end</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos" data-line="984"></span></a><span class="kr">end</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos" data-line="985"></span></a>
</span><span id="L-986"><a href="#L-986"><span class="linenos" data-line="986"></span></a><span class="kr">return</span> <span class="n">export</span>
</span></pre></div>
<!-- 
NewPP limit report
Parsed by mw‐web.eqiad.main‐85db4f49b5‐2qmgx
Cached time: 20241114081712
Cache expiry: 2592000
Reduced expiry: false
Complications: [vary‐revision‐sha1]
CPU time usage: 0.246 seconds
Real time usage: 0.363 seconds
Preprocessor visited node count: 182/1000000
Post‐expand include size: 6191/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 8/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 2880/5000000 bytes
Lua time usage: 0.225/10.000 seconds
Lua memory usage: 4035563/104857600 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  345.977      1 Template:documentation
100.00%  345.977      1 -total
-->
</div><!--esi <esi:include src="/esitest-fa8a495983347898/content" /> --><noscript><img src="https://login.wikimedia.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" width="1" height="1" style="border: none; position: absolute;"></noscript>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://en.wiktionary.org/w/index.php?title=Module:User:Erutuon/grc&amp;oldid=52622602">https://en.wiktionary.org/w/index.php?title=Module:User:Erutuon/grc&amp;oldid=52622602</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/wiki/Category:User_sandbox_modules" title="Category:User sandbox modules">User sandbox modules</a></li><li><a href="/wiki/Category:Entry-generating_modules" title="Category:Entry-generating modules">Entry-generating modules</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/wiki/Category:Pages_with_module_errors/hidden" title="Category:Pages with module errors/hidden">Pages with module errors/hidden</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-anonuserpage" class="mw-list-item"><span title="The user page for the IP address you are editing as">Not logged in</span></li><li id="pt-anontalk" class="mw-list-item"><a href="/wiki/Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n"><span>Talk</span></a></li><li id="pt-anoncontribs" class="mw-list-item"><a href="/wiki/Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y"><span>Contributions</span></a></li><li id="pt-createaccount" class="mw-list-item"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Module%3AUser%3AErutuon%2Fgrc" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Module%3AUser%3AErutuon%2Fgrc" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-module" class="selected mw-list-item"><a href="/wiki/Module:User:Erutuon/grc" title="View the module page [c]" accesskey="c"><span>Module</span></a></li><li id="ca-talk" class="mw-list-item"><a href="/wiki/Module_talk:User:Erutuon/grc" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/Module:User:Erutuon/grc"><span>Read</span></a></li><li id="ca-edit" class="mw-list-item"><a href="/w/index.php?title=Module:User:Erutuon/grc&amp;action=edit" title="Edit this page [e]" accesskey="e"><span>Edit</span></a></li><li id="ca-history" class="mw-list-item"><a href="/w/index.php?title=Module:User:Erutuon/grc&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>History</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/w/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Wiktionary" aria-label="Search Wiktionary" autocapitalize="none" title="Search Wiktionary [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Wiktionary:Main_Page"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-mainpage-text" class="mw-list-item"><a href="/wiki/Wiktionary:Main_Page"><span>Main Page</span></a></li><li id="n-portal" class="mw-list-item"><a href="/wiki/Wiktionary:Community_portal" title="About the project, what you can do, where to find things"><span>Community portal</span></a></li><li id="n-requestedarticles" class="mw-list-item"><a href="/wiki/Wiktionary:Requested_entries"><span>Requested entries</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-randompage" class="mw-list-item"><a href="/wiki/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random entry</span></a></li><li id="n-help" class="mw-list-item"><a href="https://en.wiktionary.org/wiki/Help:Contents" title="The place to find out"><span>Help</span></a></li><li id="n-Glossary" class="mw-list-item"><a href="/wiki/Appendix:Glossary"><span>Glossary</span></a></li><li id="n-sitesupport" class="mw-list-item"><a href="//donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=C13_en.wiktionary.org&amp;uselang=en" title="Support us"><span>Donations</span></a></li><li id="n-contact" class="mw-list-item"><a href="/wiki/Wiktionary:Contact_us"><span>Contact us</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Module:User:Erutuon/grc" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Module:User:Erutuon/grc" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-upload" class="mw-list-item"><a href="//commons.wikimedia.org/wiki/Special:UploadWizard?uselang=en" title="Upload files [u]" accesskey="u"><span>Upload file</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/w/index.php?title=Module:User:Erutuon/grc&amp;oldid=52622602" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/w/index.php?title=Module:User:Erutuon/grc&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-urlshortener" class="mw-list-item"><a href="/w/index.php?title=Special:UrlShortener&amp;url=https%3A%2F%2Fen.wiktionary.org%2Fwiki%2FModule%3AUser%3AErutuon%2Fgrc"><span>Get shortened URL</span></a></li><li id="t-urlshortener-qrcode" class="mw-list-item"><a href="/w/index.php?title=Special:QrCode&amp;url=https%3A%2F%2Fen.wiktionary.org%2Fwiki%2FModule%3AUser%3AErutuon%2Fgrc"><span>Download QR code</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-electronpdfservice-sidebar-portlet-heading" class="mw-portlet mw-portlet-electronpdfservice-sidebar-portlet-heading vector-menu-portal portal vector-menu" aria-labelledby="p-electronpdfservice-sidebar-portlet-heading-label"  >
	<h3
		id="p-electronpdfservice-sidebar-portlet-heading-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Print/export</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="electron-print_pdf" class="mw-list-item"><a href="/w/index.php?title=Special:DownloadAsPdf&amp;page=Module%3AUser%3AErutuon%2Fgrc&amp;action=show-download-screen"><span>Download as PDF</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-wikibase-otherprojects" class="mw-portlet mw-portlet-wikibase-otherprojects emptyPortlet vector-menu-portal portal vector-menu" aria-labelledby="p-wikibase-otherprojects-label"  >
	<h3
		id="p-wikibase-otherprojects-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">In other projects</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

	
<nav id="p-lang" class="mw-portlet mw-portlet-lang vector-menu-portal portal vector-menu" aria-labelledby="p-lang-label"  >
	<h3
		id="p-lang-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">In other languages</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		<div class="after-portlet after-portlet-lang"><span class="uls-after-portlet-link"></span><span class="wb-langlinks-add wb-langlinks-link"><a href="https://www.wikidata.org/wiki/Special:NewItem?site=enwiktionary&amp;page=Module%3AUser%3AErutuon%2Fgrc" title="Add interlanguage links" class="wbc-editpage">Add links</a></span></div>
	</div>
</nav>

</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 4 May 2019, at 16:39.</li>
	<li id="footer-info-copyright">Definitions and other text are available under the <a rel="nofollow" class="external text" href="//creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike License</a>; additional terms may apply. By using this site, you agree to the <a class="external text" href="https://foundation.wikimedia.org/wiki/Special:MyLanguage/Policy:Terms_of_Use">Terms of Use</a> and <a class="external text" href="https://foundation.wikimedia.org/wiki/Special:MyLanguage/Policy:Privacy_policy">Privacy Policy.</a></li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Special:MyLanguage/Policy:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/Wiktionary:About">About Wiktionary</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/Wiktionary:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-wm-codeofconduct"><a href="https://foundation.wikimedia.org/wiki/Special:MyLanguage/Policy:Universal_Code_of_Conduct">Code of Conduct</a></li>
	<li id="footer-places-developers"><a href="https://developer.wikimedia.org">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/en.wiktionary.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Special:MyLanguage/Policy:Cookie_statement">Cookie statement</a></li>
	<li id="footer-places-mobileview"><a href="//en.m.wiktionary.org/w/index.php?title=Module:User:Erutuon/grc&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/static/images/footer/wikimedia-button.svg" width="84" height="29" alt="Wikimedia Foundation" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/w/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");mw.config.set({"wgHostname":"mw-web.eqiad.main-85db4f49b5-2qmgx","wgBackendResponseTime":473,"wgPageParseReport":{"limitreport":{"cputime":"0.246","walltime":"0.363","ppvisitednodes":{"value":182,"limit":1000000},"postexpandincludesize":{"value":6191,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":5,"limit":100},"expensivefunctioncount":{"value":8,"limit":500},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":2880,"limit":5000000},"entityaccesscount":{"value":0,"limit":400},"timingprofile":["100.00%  345.977      1 Template:documentation","100.00%  345.977      1 -total"]},"scribunto":{"limitreport-timeusage":{"value":"0.225","limit":"10.000"},"limitreport-memusage":{"value":4035563,"limit":104857600}},"cachereport":{"origin":"mw-web.eqiad.main-85db4f49b5-2qmgx","timestamp":"20241114081712","ttl":2592000,"transientcontent":false}}});});</script>
</body>
</html>